@use '../../base/var' as *;

.celebration {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
	overflow: hidden;
	z-index: 10;
}

.celebration-particle {
	position: absolute;
	animation: celebrate-arc linear forwards;

	// Primary color (orange)
	&--primary {
		background: $lc-primary;
	}

	// Secondary color (purple)
	&--secondary {
		background: $lc-secondary;
	}
}

// Parabolic arc animation with air drag
// Fast burst, gradual deceleration, gentle gravity throughout
@keyframes celebrate-arc {
	0% {
		opacity: 1;
		transform:
			translate(-50%, -50%)
			translateX(0)
			translateY(0)
			scale(0.2)
			rotate(0deg);
	}
	8% {
		opacity: 1;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.4))
			translateY(calc(var(--burst-y) * 0.55))
			scale(1)
			rotate(calc(var(--rotation) * 0.12));
	}
	20% {
		opacity: 1;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.7))
			translateY(calc(var(--burst-y) * 0.92))
			scale(0.95)
			rotate(calc(var(--rotation) * 0.28));
	}
	30% {
		opacity: 0.97;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.82))
			translateY(calc(var(--burst-y) * 0.98))
			scale(0.9)
			rotate(calc(var(--rotation) * 0.38));
	}
	42% {
		opacity: 0.92;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.9))
			translateY(var(--burst-y))
			scale(0.82)
			rotate(calc(var(--rotation) * 0.5));
	}
	55% {
		opacity: 0.82;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.94))
			translateY(calc(var(--burst-y) * 0.99 + var(--gravity) * 0.01))
			scale(0.75)
			rotate(calc(var(--rotation) * 0.6));
	}
	65% {
		opacity: 0.7;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.95))
			translateY(calc(var(--burst-y) * 0.98 + var(--gravity) * 0.02))
			scale(0.7)
			rotate(calc(var(--rotation) * 0.7));
	}
	78% {
		opacity: 0.5;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.97))
			translateY(calc(var(--burst-y) * 0.96 + var(--gravity) * 0.03))
			scale(0.6)
			rotate(calc(var(--rotation) * 0.82));
	}
	90% {
		opacity: 0.25;
		transform:
			translate(-50%, -50%)
			translateX(calc(var(--end-x) * 0.99))
			translateY(calc(var(--burst-y) * 0.94 + var(--gravity) * 0.05))
			scale(0.5)
			rotate(calc(var(--rotation) * 0.92));
	}
	100% {
		opacity: 0;
		transform:
			translate(-50%, -50%)
			translateX(var(--end-x))
			translateY(calc(var(--burst-y) * 0.92 + var(--gravity) * 0.07))
			scale(0.42)
			rotate(var(--rotation));
	}
}

// Dark mode adjustments
html.dark {
	.celebration-particle {
		&--primary {
			background: $lc-primary--light;
		}

		&--secondary {
			background: #c4b8f0;
		}
	}
}

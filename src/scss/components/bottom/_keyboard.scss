@use "../../base/var" as *;

.keyboard {
  width: 100%;
  height: $lc-keyboard-height;
  // Use safe area inset for devices with home indicators (notched iPhones)
  // Falls back to 0 on devices without safe areas
  padding: 0 0 env(safe-area-inset-bottom, 0);
  text-align: center;
  align-self: flex-end;

  .k-row {
    display: flex;
    justify-content: center;
    margin: 0.25rem 0;

    @media (min-width: 768px) {
      margin: 0.35rem 0;
    }

    button {
      position: relative;
      // background-color handled by Tailwind classes in React component
      border: none;
      // Width calculated so 10 keys (row 1) fill the screen
      // 10 keys * 2 margins * 0.125rem = 2.5rem + 0.5rem padding = 3rem
      width: calc((100% - 2.5rem) / 10);
      height: 52px;
      border-radius: 8px;
      margin: 0 0.125rem;
      padding: 0;

      @media (max-height: 600px) {
        height: 42px;
      }

      // Larger keys on desktop
      @media (min-width: 768px) {
        width: 46px;
        height: 64px;
        margin: 0 0.2rem;
        font-size: 1.1rem;
      }

      &#backspace {
        // 1.5x the standard key width on mobile
        width: calc((100% - 3rem) / 10 * 1.5);
        // background-color handled by Tailwind classes in React component

        @media (min-width: 768px) {
          width: 66px;
        }
      }

      &#enter-key {
        // 1.5x the standard key width on mobile
        width: calc((100% - 3rem) / 10 * 1.5);
        font-size: 0.75rem;
        font-weight: 600;
        // background-color handled by Tailwind classes in React component

        @media (min-width: 768px) {
          width: 66px;
          font-size: 0.85rem;
        }
      }

      span,
      img {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        display: block;
      }
    }
  }
}

// Compact keyboard for constrained heights on wider screens
@media (min-width: 768px) and (max-height: 700px) and (min-height: 500px) {
  .keyboard {
    .k-row {
      margin: 0.2rem 0;

      button {
        width: 38px;
        height: 44px;
        font-size: 0.95rem;
      }

      button#backspace,
      button#enter-key {
        width: 56px;
      }
    }
  }
}

// Hide keyboard only on very constrained heights where it truly won't fit
@media (min-width: 768px) and (max-height: 499px) {
  .keyboard {
    display: none;
  }
}

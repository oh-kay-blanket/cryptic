{"version":3,"file":"component---src-pages-clues-clues-json-clid-js-bbb2f8a1008c78228aae.js","mappings":"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","sources":["webpack://learn-cryptic/./src/assets/img/logo-short.png","webpack://learn-cryptic/./src/components/TopBar.js","webpack://learn-cryptic/./src/components/ScrollToTop.js","webpack://learn-cryptic/./src/components/layout.js","webpack://learn-cryptic/./src/components/bottom/Button.js","webpack://learn-cryptic/./src/components/bottom/ButtonContainer.js","webpack://learn-cryptic/./src/components/bottom/Keyboard.js","webpack://learn-cryptic/./src/assets/img/backspace.svg","webpack://learn-cryptic/./src/components/bottom/Celebration.js","webpack://learn-cryptic/./src/utils/bottom/getMessage.js","webpack://learn-cryptic/./src/components/bottom/Message.js","webpack://learn-cryptic/./src/utils/bottom/prepBottom.js","webpack://learn-cryptic/./src/components/Bottom.js","webpack://learn-cryptic/./src/components/Tooltip.js","webpack://learn-cryptic/./src/components/HintTooltip.js","webpack://learn-cryptic/./src/utils/clue/getTargetLetters.js","webpack://learn-cryptic/./src/utils/clue/removeSpecialChar.js","webpack://learn-cryptic/./src/utils/clue/fixLetters.js","webpack://learn-cryptic/./src/utils/clue/addLetters.js","webpack://learn-cryptic/./src/utils/clue/usePrepClue.js","webpack://learn-cryptic/./src/utils/clue/underlineLetters.js","webpack://learn-cryptic/./src/utils/clue/highlightLetters.js","webpack://learn-cryptic/./src/utils/clue/changeColor.js","webpack://learn-cryptic/./src/utils/clue/moveLetters.js","webpack://learn-cryptic/./src/utils/clue/handleHint.js","webpack://learn-cryptic/./src/utils/clue/useManageClue.js","webpack://learn-cryptic/./src/pages/clues/{cluesJson.clid}.js"],"sourcesContent":["export default __webpack_public_path__ + \"static/logo-short-1bc27782bd51e8a2c1a14d4b9578bf31.png\";","import React, { useContext, useState, useEffect } from 'react';\nimport { Link } from 'gatsby';\n\nimport { UserContext } from '../utils/UserContext';\n\nimport logo from '../assets/img/logo-short.png';\n// Custom info icon component\nconst InfoIcon = () => (\n  <svg\n    width='20'\n    height='20'\n    viewBox='0 0 24 24'\n    fill='none'\n    xmlns='http://www.w3.org/2000/svg'\n    className='text-neutral-500 dark:text-neutral-200'\n  >\n    <circle cx='12' cy='12' r='10' stroke='currentColor' strokeWidth='1.5' fill='none' />\n    <circle cx='12' cy='9' r='1' fill='currentColor' />\n    <path d='M11 12h2v5h-2z' fill='currentColor' />\n  </svg>\n);\n\nconst BarGraphIcon = () => (\n  <svg\n    width='20'\n    height='20'\n    viewBox='0 0 24 24'\n    fill='none'\n    xmlns='http://www.w3.org/2000/svg'\n    className='text-neutral-500 dark:text-neutral-200'\n  >\n    <rect x='3' y='9' width='3' height='12' rx='1' fill='currentColor' />\n    <rect x='10.5' y='3' width='3' height='18' rx='1' fill='currentColor' />\n    <rect x='18' y='12' width='3' height='9' rx='1' fill='currentColor' />\n  </svg>\n);\n\nconst ListIcon = () => (\n  <svg\n    width='20'\n    height='20'\n    viewBox='0 0 24 24'\n    fill='none'\n    xmlns='http://www.w3.org/2000/svg'\n    className='text-neutral-500 dark:text-neutral-200'\n  >\n    <rect x='3' y='3' width='3' height='3' rx='1' fill='currentColor' />\n    <rect x='3' y='10.5' width='3' height='3' rx='1' fill='currentColor' />\n    <rect x='3' y='18' width='3' height='3' rx='1' fill='currentColor' />\n    <rect x='8' y='3' width='13' height='3' rx='1' fill='currentColor' />\n    <rect x='8' y='10.5' width='13' height='3' rx='1' fill='currentColor' />\n    <rect x='8' y='18' width='13' height='3' rx='1' fill='currentColor' />\n  </svg>\n);\n\nconst Modal = ({ open, onClose, children }) => {\n  useEffect(() => {\n    const preventDefault = (e) => {\n      e.preventDefault();\n    };\n\n    if (open) {\n      // Prevent scrolling by blocking wheel and touch events\n      document.addEventListener('wheel', preventDefault, { passive: false });\n      document.addEventListener('touchmove', preventDefault, { passive: false });\n    }\n\n    // Cleanup function to remove event listeners\n    return () => {\n      document.removeEventListener('wheel', preventDefault);\n      document.removeEventListener('touchmove', preventDefault);\n    };\n  }, [open]);\n\n  if (!open) return null;\n  return (\n    <div className='modal-overlay' onClick={onClose}>\n      <div\n        className='modal-content bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100'\n        onClick={(e) => e.stopPropagation()}\n      >\n        <button\n          className='modal-close text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200'\n          onClick={onClose}\n          aria-label='Close'\n        >\n          &times;\n        </button>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nconst TopBar = () => {\n  const {\n    setReturnLearn,\n    completedClues = [],\n    streak = 0,\n    longestStreak = 0,\n    darkMode,\n    setDarkMode,\n    currentStats,\n  } = useContext(UserContext);\n  const [helpOpen, setHelpOpen] = useState(false);\n  const [statsOpen, setStatsOpen] = useState(false);\n  const [showCurrentStatsTooltip, setShowCurrentStatsTooltip] = useState(false);\n\n  const clickTitle = () => {\n    setReturnLearn(false);\n  };\n\n  // Stats calculations\n  const totalSolved = completedClues.length;\n  const avgGuesses =\n    totalSolved > 0\n      ? (completedClues.reduce((sum, c) => sum + (c.guesses || 0), 0) / totalSolved).toFixed(1)\n      : '0';\n  const avgHints =\n    totalSolved > 0\n      ? (completedClues.reduce((sum, c) => sum + (c.hints || 0), 0) / totalSolved).toFixed(1)\n      : '0';\n\n  return (\n    <>\n      <header className='top-bar bg-white dark:bg-neutral-800 border-b border-neutral-200 dark:border-neutral-700'>\n        <div className='top-bar-container lc-container'>\n          <div className='topbar-left'>\n            <Link\n              to='/clues'\n              className='icon-btn hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg p-2 transition-colors'\n              aria-label='All clues'\n            >\n              <ListIcon />\n            </Link>\n            <button\n              className='icon-btn hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg p-2 transition-colors'\n              aria-label='Stats'\n              onClick={() => setStatsOpen(true)}\n            >\n              <BarGraphIcon />\n            </button>\n            <button\n              className='icon-btn hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-lg p-2 transition-colors'\n              aria-label='Help'\n              onClick={() => setHelpOpen(true)}\n            >\n              <InfoIcon />\n            </button>\n            {currentStats && (\n              <div\n                className='current-stats bg-neutral-200 dark:bg-neutral-600 dark:text-white'\n                onMouseEnter={() => setShowCurrentStatsTooltip(true)}\n                onMouseLeave={() => setShowCurrentStatsTooltip(false)}\n                onClick={() => setShowCurrentStatsTooltip(!showCurrentStatsTooltip)}\n                role='button'\n                tabIndex={0}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    setShowCurrentStatsTooltip(!showCurrentStatsTooltip);\n                  }\n                }}\n              >\n                <span className='stat'>{currentStats.hints}</span>\n                <span className='stat-separator'>:</span>\n                <span className='stat'>{currentStats.guesses}</span>\n                {showCurrentStatsTooltip && (\n                  <div className='current-stats-tooltip'>\n                    {currentStats.hints} {currentStats.hints === 1 ? 'hint' : 'hints'}, {currentStats.guesses} {currentStats.guesses === 1 ? 'guess' : 'guesses'}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n          <Link to='/' onClick={clickTitle} className='topbar-logo'>\n            <img src={logo} alt='' />\n          </Link>\n        </div>\n      </header>\n      <Modal id='modal-info' open={helpOpen} onClose={() => setHelpOpen(false)}>\n        <div className='mt-6'>\n          <h3 className='font-semibold mb-3'>Theme</h3>\n          <div className='flex mb-4'>\n            <div className='flex theme-picker-bg rounded-lg p-1 gap-1'>\n              <label className='flex items-center cursor-pointer'>\n                <input\n                  type='radio'\n                  name='theme'\n                  checked={darkMode === null}\n                  onChange={() => setDarkMode(null)}\n                  className='sr-only'\n                />\n                <span\n                  className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                    darkMode === null\n                      ? 'bg-white dark:bg-neutral-600 text-neutral-900 dark:text-white shadow-sm'\n                      : 'text-neutral-600 dark:text-neutral-200 hover:text-neutral-900 dark:hover:text-white'\n                  }`}\n                >\n                  System\n                </span>\n              </label>\n              <label className='flex items-center cursor-pointer'>\n                <input\n                  type='radio'\n                  name='theme'\n                  checked={darkMode === false}\n                  onChange={() => setDarkMode(false)}\n                  className='sr-only'\n                />\n                <span\n                  className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                    darkMode === false\n                      ? 'bg-white dark:bg-neutral-600 text-neutral-900 dark:text-white shadow-sm'\n                      : 'text-neutral-600 dark:text-neutral-200 hover:text-neutral-900 dark:hover:text-white'\n                  }`}\n                >\n                  Light\n                </span>\n              </label>\n              <label className='flex items-center cursor-pointer'>\n                <input\n                  type='radio'\n                  name='theme'\n                  checked={darkMode === true}\n                  onChange={() => setDarkMode(true)}\n                  className='sr-only'\n                />\n                <span\n                  className={`px-3 py-1 text-sm rounded-md transition-colors ${\n                    darkMode === true\n                      ? 'bg-white dark:bg-neutral-600 text-neutral-900 dark:text-white shadow-sm'\n                      : 'text-neutral-600 dark:text-neutral-200 hover:text-neutral-900 dark:hover:text-white'\n                  }`}\n                >\n                  Dark\n                </span>\n              </label>\n            </div>\n          </div>\n          <div className='mt-4 border-t border-neutral-200 dark:border-neutral-600 pt-4'>\n            <p>\n              <Link to='/learn' className='underline'>\n                What are cryptics?\n              </Link>\n            </p>\n\n            <p className='mt-4'>\n              <Link to='/creators' className='underline'>\n                About us\n              </Link>\n            </p>\n          </div>\n\n          <div className='mt-4 border-t border-neutral-200 dark:border-neutral-600 pt-4'>\n            <p>\n              Have questions, comments, or want to contribute future cryptic clues?\n              <a\n                href='mailto:learncrypticgame@gmail.com?subject=Learn Cryptic Feedback'\n                className='underline mt-2 block'\n              >\n                Email us\n              </a>\n            </p>\n          </div>\n        </div>\n      </Modal>\n      <Modal id='modal-stats' open={statsOpen} onClose={() => setStatsOpen(false)}>\n        <h2 className='my-3 text-xl font-semibold'>Statistics</h2>\n        <div className='stats-list'>\n          <div className='stat-item'>\n             <span className='font-medium mx-1'>Current Streak:</span> {streak}\n          </div>\n          <div className='stat-item'>\n             <span className='font-medium mx-1'>Longest Streak:</span> {longestStreak}\n          </div>\n          <div className='stat-item'>\n             <span className='font-medium mx-1'>Clues solved:</span> {totalSolved}\n          </div>\n          <div className='stat-item'>\n             <span className='font-medium mx-1'>Avg guesses:</span> {avgGuesses}\n          </div>\n          <div className='stat-item'>\n             <span className='font-medium mx-1'>Avg hints:</span> {avgHints}\n          </div>\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default TopBar;\n","import { useEffect } from 'react'\nimport { useLocation } from '@reach/router'\n\nconst ScrollToTop = () => {\n\tconst { pathname } = useLocation()\n\n\tuseEffect(() => {\n\t\t// Use instant scroll and target multiple elements for iOS Safari compatibility\n\t\twindow.scrollTo(0, 0)\n\t\tdocument.documentElement.scrollTop = 0\n\t\tdocument.body.scrollTop = 0\n\t}, [pathname])\n\n\treturn null\n}\n\nexport default ScrollToTop\n","import React from 'react'\nimport TopBar from './TopBar'\nimport ScrollToTop from './ScrollToTop'\n\nconst Layout = ({ children }) => {\n\treturn (\n\t\t<div className=\"min-h-screen bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 transition-colors duration-200 flex flex-col\">\n\t\t\t<ScrollToTop />\n\t\t\t<TopBar />\n\t\t\t<main className=\"flex-1\">{children}</main>\n\t\t</div>\n\t)\n}\n\nexport default Layout\n\nexport { Head } from './Head'\n","import React from \"react\"\nimport { Link } from \"gatsby\"\n\nconst Button = ({ btnInfo }) => {\n\n\tconst { path = false, name, style, onClick, img = false, disabled = false } = btnInfo\n\n\t// Add dark mode classes based on button style\n\tconst getDarkModeClasses = (style) => {\n\t\tswitch(style) {\n\t\t\tcase 'primary':\n\t\t\t\treturn 'dark:!bg-[rgb(120,70,45)] dark:!border-[rgb(120,70,45)] dark:hover:!bg-orange-600'\n\t\t\tcase 'alt':\n\t\t\t\treturn 'dark:!bg-[#4A3F6B] dark:!border-[#4A3F6B] dark:hover:!bg-purple-600'\n\t\t\tcase 'secondary':\n\t\t\t\treturn 'dark:!border-neutral-300 dark:hover:!bg-neutral-700 dark:hover:!border-neutral-700'\n\t\t\tcase 'gray':\n\t\t\t\treturn 'dark:!bg-neutral-600 dark:!border-neutral-600 dark:hover:!bg-neutral-700'\n\t\t\tdefault:\n\t\t\t\treturn ''\n\t\t}\n\t}\n\n\tconst darkModeClasses = getDarkModeClasses(style)\n\n\treturn(<>\n\t\t{path ?\n\t\t\t<Link to={path} id={name.toLowerCase()} data-testid={name.toLowerCase()} className={`show-btn ${style} ${darkModeClasses} ${disabled ? 'disabled' : ''}`} type='button' onClick={disabled ? undefined : onClick}>{name}</Link> :\n\t\t\t<button id={name.toLowerCase()} data-testid={name.toLowerCase()} className={`show-btn ${style} ${darkModeClasses} ${disabled ? 'disabled' : ''}`} type='button' disabled={disabled} onClick={disabled ? undefined : onClick}>{name}{img}</button>\n\t\t}\n\t</>)\n}\n\nexport default Button","import React from 'react'\nimport Button from './Button'\n\nconst ButtonContainer = ({ btnArr, isSolution, stack = false }) => {\n\n\tconst buttons = btnArr.map((btnInfo, index) => <Button key={index} btnInfo={btnInfo} />)\n\n\treturn (\n\t\t<div className={`button-container${stack ? ' stack' : ''}${isSolution ? ' solution' : ''}`}>\n\t\t\t{buttons}\n\t\t</div>\n\t)\n}\n\nexport default ButtonContainer","import React, { useEffect } from 'react'\n\nimport backspace from '../../assets/img/backspace.svg'\n\nconst Keyboard = ({ handleInput, onEnter, canCheckAnswer }) => {\n\t// handle keyboard hardware press\n\tuseEffect(() => {\n\t\tconst handleKeyDown = (e) => {\n\t\t\tif (/^[a-zA-Z]$/.test(e.key)) {\n\t\t\t\thandleInput(e.key.toUpperCase())\n\t\t\t} else if (e.key === 'Backspace' || e.key === 'Delete') {\n\t\t\t\thandleInput('del')\n\t\t\t} else if (e.key === 'Enter' && canCheckAnswer) {\n\t\t\t\tonEnter()\n\t\t\t}\n\t\t}\n\n\t\tdocument.addEventListener('keydown', handleKeyDown)\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('keydown', handleKeyDown)\n\t\t}\n\t}, [handleInput, onEnter, canCheckAnswer])\n\n\treturn (\n\t\t<div className='lc-container keyboard'>\n\t\t\t<div className='k-row k-row-1'>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('Q')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-Q'\n\t\t\t\t>\n\t\t\t\t\t<span>Q</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('W')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-W'\n\t\t\t\t>\n\t\t\t\t\t<span>W</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('E')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-E'\n\t\t\t\t>\n\t\t\t\t\t<span>E</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('R')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-R'\n\t\t\t\t>\n\t\t\t\t\t<span>R</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('T')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-T'\n\t\t\t\t>\n\t\t\t\t\t<span>T</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('Y')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-Y'\n\t\t\t\t>\n\t\t\t\t\t<span>Y</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('U')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-U'\n\t\t\t\t>\n\t\t\t\t\t<span>U</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('I')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-I'\n\t\t\t\t>\n\t\t\t\t\t<span>I</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('O')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-O'\n\t\t\t\t>\n\t\t\t\t\t<span>O</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('P')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-P'\n\t\t\t\t>\n\t\t\t\t\t<span>P</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className='k-row k-row-2'>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('A')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-A'\n\t\t\t\t>\n\t\t\t\t\t<span>A</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('S')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-S'\n\t\t\t\t>\n\t\t\t\t\t<span>S</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('D')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-D'\n\t\t\t\t>\n\t\t\t\t\t<span>D</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('F')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-F'\n\t\t\t\t>\n\t\t\t\t\t<span>F</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('G')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-G'\n\t\t\t\t>\n\t\t\t\t\t<span>G</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('H')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-H'\n\t\t\t\t>\n\t\t\t\t\t<span>H</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('J')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-J'\n\t\t\t\t>\n\t\t\t\t\t<span>J</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('K')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-K'\n\t\t\t\t>\n\t\t\t\t\t<span>K</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('L')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-L'\n\t\t\t\t>\n\t\t\t\t\t<span>L</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className='k-row k-row-3'>\n\t\t\t\t<button\n\t\t\t\t\tonClick={canCheckAnswer ? onEnter : undefined}\n\t\t\t\t\tid='enter-key'\n\t\t\t\t\tclassName={canCheckAnswer\n\t\t\t\t\t\t? 'bg-[#FFCBAB] dark:!bg-[rgb(120,70,45)] dark:!text-neutral-100 hover:bg-[#f5c1a1] hover:dark:!bg-[rgb(110,65,42)]'\n\t\t\t\t\t\t: 'bg-neutral-200 dark:!bg-neutral-700 text-neutral-400 dark:!text-neutral-500 cursor-default'}\n\t\t\t\t\tdata-testid='keyboard-ENTER'\n\t\t\t\t>\n\t\t\t\t\t<span>Enter</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('Z')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-Z'\n\t\t\t\t>\n\t\t\t\t\t<span>Z</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('X')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-X'\n\t\t\t\t>\n\t\t\t\t\t<span>X</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('C')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-C'\n\t\t\t\t>\n\t\t\t\t\t<span>C</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('V')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-V'\n\t\t\t\t>\n\t\t\t\t\t<span>V</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('B')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-B'\n\t\t\t\t>\n\t\t\t\t\t<span>B</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('N')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-N'\n\t\t\t\t>\n\t\t\t\t\t<span>N</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('M')}\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-M'\n\t\t\t\t>\n\t\t\t\t\t<span>M</span>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => handleInput('del')}\n\t\t\t\t\tid='backspace'\n\t\t\t\t\tclassName='bg-neutral-300 dark:!bg-neutral-600 dark:!text-neutral-100 hover:bg-neutral-400 hover:dark:!bg-neutral-500'\n\t\t\t\t\tdata-testid='keyboard-DEL'\n\t\t\t\t>\n\t\t\t\t\t<img src={backspace} alt='backspace' className='dark:invert' />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Keyboard\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04LjA0NzQ0IDNIMjEuNjg5QzIzLjI0ODYgMyAyNC41IDQuMjMxMTcgMjQuNSA1LjczNjg0VjE4LjI2MzJDMjQuNSAxOS43Njg4IDIzLjI0ODYgMjEgMjEuNjg5IDIxSDguMDQ3NDRDNy4wOTk1MyAyMSA2LjI5MjA0IDIwLjUzNiA1Ljc2MzcxIDE5Ljc3MDZMMC41IDExLjk5NTVMNS43Njg1OCA0LjIxMzI5QzYuMjkwNTEgMy40NTczIDcuMDk5MjIgMyA4LjA0NzQ0IDNaTTIyLjUxNjggNS43MzY2M0MyMi41MTY4IDUuMjY0OTQgMjIuMTQwMyA0Ljg5NDUzIDIxLjY5MDEgNC44OTQ1M0g4LjA0ODUxQzcuNzk5ODUgNC44OTQ1MyA3LjU5NjM2IDUuMDA5NiA3LjQzMTEzIDUuMjQ4ODVMMi44NjM4MiAxMS45OTUzTDIuNTE1NjIgMTEuNDgxVjEyLjUwOTZMMi44NjM4MiAxMS45OTUzTDcuNDI2MjYgMTguNzM0NkM3LjYwMDI1IDE4Ljk4NjYgNy44MDYyNSAxOS4xMDUgOC4wNDg1MSAxOS4xMDVIMjEuNjkwMUMyMi4xNDAzIDE5LjEwNSAyMi41MTY4IDE4LjczNDYgMjIuNTE2OCAxOC4yNjI5VjUuNzM2NjNaIiBmaWxsPSIjNDc0NzQ3Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDQ2NSAxNS4wMTI4TDE3LjczNDQgMTYuMjYzOUwxNC40MSAxMy4wOTQxTDExLjA4NTYgMTYuMjYzOUw5Ljc3MzQ0IDE1LjAxMjhMMTMuMDk3OCAxMS44NDI5TDkuNzczNDQgOC42NzMwM0wxMS4wODU2IDcuNDIxODhMMTQuNDEgMTAuNTkxOEwxNy43MzQ0IDcuNDIxODhMMTkuMDQ2NSA4LjY3MzAzTDE1LjcyMjEgMTEuODQyOUwxOS4wNDY1IDE1LjAxMjhaIiBmaWxsPSIjNDc0NzQ3Ii8+Cjwvc3ZnPgo=\"","import React, { useEffect, useState } from 'react'\n\nconst Celebration = () => {\n\tconst [particles, setParticles] = useState([])\n\tconst [origin, setOrigin] = useState({ x: 50, y: 50 })\n\n\tuseEffect(() => {\n\t\t// Find the solution box and get its center position\n\t\tconst solBox = document.getElementById('solSectionRef')\n\t\tif (solBox) {\n\t\t\tconst rect = solBox.getBoundingClientRect()\n\t\t\tconst centerX = ((rect.left + rect.width / 2) / window.innerWidth) * 100\n\t\t\tconst centerY = ((rect.top + rect.height / 2) / window.innerHeight) * 100\n\t\t\tsetOrigin({ x: centerX, y: centerY })\n\t\t}\n\n\t\t// Generate particles that explode outward then fall with gravity\n\t\t// Scale down velocity on wider screens so desktop matches mobile feel\n\t\tconst viewportWidth = window.innerWidth\n\t\tconst velocityScale = viewportWidth > 768 ? 600 / viewportWidth : 1\n\n\t\tconst newParticles = Array.from({ length: 45 }, (_, i) => {\n\t\t\t// Split into left side (180-260) and right side (280-360) to avoid straight up\n\t\t\tconst side = Math.random() > 0.5 ? 'left' : 'right'\n\t\t\tconst angle = side === 'left'\n\t\t\t\t? 180 + Math.random() * 80   // 180-260 degrees\n\t\t\t\t: 280 + Math.random() * 80   // 280-360 degrees\n\t\t\tconst angleRad = angle * (Math.PI / 180)\n\n\t\t\t// Random velocity (how far the initial burst goes)\n\t\t\tconst velocity = (15 + Math.random() * 25) * velocityScale\n\n\t\t\t// Horizontal movement\n\t\t\tconst endX = Math.cos(angleRad) * velocity * 1.0\n\n\t\t\t// Initial vertical burst - reduce on mobile since viewport height is smaller\n\t\t\tconst verticalScale = viewportWidth > 768 ? 1.0 : 0.7\n\t\t\tconst burstY = Math.sin(angleRad) * velocity * verticalScale\n\n\t\t\t// Gravity pulls everything down - adds to final Y position\n\t\t\tconst gravity = 40 + Math.random() * 30\n\n\t\t\treturn {\n\t\t\t\tid: i,\n\t\t\t\tendX,\n\t\t\t\tburstY,\n\t\t\t\tgravity,\n\t\t\t\tdelay: Math.random() * 0.08,\n\t\t\t\tduration: 1.0 + Math.random() * 0.4,\n\t\t\t\tsize: 5 + Math.random() * 6,\n\t\t\t\tcolor: Math.random() > 0.5 ? 'primary' : 'secondary',\n\t\t\t\trotation: 45 + Math.random() * 90, // ~1/4 turn (45-135 degrees)\n\t\t\t}\n\t\t})\n\t\tsetParticles(newParticles)\n\n\t\t// Cleanup after animation completes\n\t\tconst timeout = setTimeout(() => {\n\t\t\tsetParticles([])\n\t\t}, 2000)\n\n\t\treturn () => clearTimeout(timeout)\n\t}, [])\n\n\tif (particles.length === 0) return null\n\n\treturn (\n\t\t<div className=\"celebration\" aria-hidden=\"true\">\n\t\t\t{particles.map((particle) => (\n\t\t\t\t<div\n\t\t\t\t\tkey={particle.id}\n\t\t\t\t\tclassName={`celebration-particle celebration-particle--${particle.color}`}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tleft: `${origin.x}%`,\n\t\t\t\t\t\ttop: `${origin.y}%`,\n\t\t\t\t\t\t'--end-x': `${particle.endX}vw`,\n\t\t\t\t\t\t'--burst-y': `${particle.burstY}vh`,\n\t\t\t\t\t\t'--gravity': `${particle.gravity}vh`,\n\t\t\t\t\t\t'--rotation': `${particle.rotation}deg`,\n\t\t\t\t\t\tanimationDelay: `${particle.delay}s`,\n\t\t\t\t\t\tanimationDuration: `${particle.duration}s`,\n\t\t\t\t\t\twidth: `${particle.size}px`,\n\t\t\t\t\t\theight: `${particle.size}px`,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nexport default Celebration\n","import React from \"react\"\n\nconst getMessage = hint => {\n\n\tconst vowels = ['a', 'e', 'i', 'o', 'u']\n\n\tconst aAn = hint.category && hint.category.slice(0, 1).includes(vowels) ? 'a' : 'an'\n\n\tswitch(hint.type) {\n\t\tcase 'definition':\n\t\t\tif (hint.value.length === 1) { // Single definition\n\t\t\t\treturn <><strong>{hint.value[0].toUpperCase()}</strong> is the definition</>\n\t\t\t} else { // Double definition\n\t\t\t\treturn <>Both <strong>{hint.value[0].toUpperCase()}</strong> and <strong>{hint.value[1].toUpperCase()}</strong> are definitions for the solution</>\n\t\t\t}\n\t\tcase 'indicator':\n\t\t\tswitch(hint.category) {\n\t\t\t\tcase 'anagram':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates an anagram of <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'ag-2':\n\t\t\t\t\treturn <><strong>{hint.end.value[1].toUpperCase()}</strong> is an anagram of <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'charade':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> can be <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'container':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a container</>\n\t\t\t\tcase 'deletion':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a deletion</>\n\t\t\t\tcase 'delete even':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates deleting the even letters from <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'delete odd':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates deleting the odd letters from <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'direct':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> is used</>\n\t\t\t\tcase 'hidden word':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a hidden word in <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'hw-2':\n\t\t\t\t\treturn <><strong>{hint.end.value[1].toUpperCase()}</strong> is hidden within <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'homophone':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a homophone</>\n\t\t\t\tcase 'hp-2':\n\t\t\t\t\treturn <><strong>{hint.end.value[1].toUpperCase()}</strong> is a homophone of <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'initialism':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates the beginning of one or more words</>\n\t\t\t\tcase 'letter bank':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a letter bank</>\n\t\t\t\tcase 'lb-2':\n\t\t\t\t\treturn <><strong>{hint.end.value[0].toUpperCase()}</strong> is a letter bank for <strong>{hint.end.value[1].toUpperCase()}</strong></>\n\t\t\t\tcase 'particle':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> can be <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'reversal':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> indicates a reversal of <strong>{hint.end.value[0].toUpperCase()}</strong>, making <strong>{hint.end.value[1].toUpperCase()}</strong></>\n\t\t\t\tcase 'synonym':\n\t\t\t\t\treturn <>Find a synonym for <strong>{hint.value.toUpperCase()}</strong></>\n\t\t\t\tcase 'sy-2':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> can be <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'symbol':\n\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> can be <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'spoonerism':\n\t\t\t\t\treturn <><strong>{hint.end.value[1].toUpperCase()}</strong> is a spoonerism of <strong>{hint.end.value[0].toUpperCase()}</strong></>\n\t\t\t\tcase 'dd-2':\n\t\t\t\tcase 'in-2':\n\t\t\t\t\treturn\n\t\t\t\tdefault:\n\t\t\t\t\t// One end point\n\t\t\t\t\tif (hint.end.value.length === 1) {\n\t\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> incicates {aAn} {hint.category} at <strong>{hint.end.value[0].toUpperCase()}</strong></> \n\t\t\t\t\t\t\n\t\t\t\t\t\t// Two end points\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <><strong>{hint.value.toUpperCase()}</strong> incicates {aAn} {hint.category} at <strong>{hint.end.value[0].toUpperCase()}</strong> and <strong>{hint.end.value[1].toUpperCase()}</strong></> \n\t\t\t\t\t}\n\t\t\t}\n\t\tdefault: \n\t\t\treturn hint.value\n\t}\n}\n\nexport default getMessage","import React, { useRef } from \"react\";\nimport ButtonContainer from \"./ButtonContainer\";\nimport Celebration from \"./Celebration\";\n\nimport getMessage from \"../../utils/bottom/getMessage\";\n\nconst Message = ({\n  activeClue,\n  nextHint,\n  input,\n  checkAns,\n  isCorrectAns,\n  isSolution,\n  returnLearn,\n  buttons,\n  showLogic,\n  setShowLogic,\n  solutionRevealedViaHint,\n  stats,\n}) => {\n  const msgContainer = useRef();\n\n  // figure out which text to display\n  const message = checkAns ? (\n    isCorrectAns ? (\n      <div data-testid=\"message-success\">\n        <strong>{input.join(\"\").toUpperCase()}</strong> is correct.\n        <div\n          style={{\n            display: \"flex\",\n            gap: \"0.5rem\",\n            justifyContent: \"center\",\n            marginTop: \"0.5rem\",\n          }}\n        >\n          <span\n            style={{\n              backgroundColor: \"var(--lc-highlight-bg)\",\n              color: \"var(--lc-text-primary)\",\n              padding: \"2px 6px\",\n              lineHeight: \"1.5\",\n              borderRadius: \"4px\",\n              fontSize: \"0.875rem\",\n            }}\n          >\n            {stats.hints} {stats.hints === 1 ? \"hint\" : \"hints\"}\n          </span>\n          <span\n            style={{\n              backgroundColor: \"var(--lc-active-bg)\",\n              color: \"var(--lc-text-primary)\",\n              padding: \"2px 6px\",\n              lineHeight: \"1.5\",\n              borderRadius: \"4px\",\n              fontSize: \"0.875rem\",\n            }}\n          >\n            {stats.guesses} {stats.guesses === 1 ? \"guess\" : \"guesses\"}\n          </span>\n        </div>\n      </div>\n    ) : (\n      <div data-testid=\"message-error\">\n        <strong>{input.join(\"\").toUpperCase()}</strong> is not the correct\n        answer.\n      </div>\n    )\n  ) : solutionRevealedViaHint && isSolution ? (\n    <div data-testid=\"message-revealed\">\n      The answer is{\" \"}\n      <strong>{activeClue.solution.arr.join(\"\").toUpperCase()}</strong>\n    </div>\n  ) : (\n    getMessage(activeClue.hints[nextHint])\n  );\n\n  const explainer = activeClue.hints[nextHint].explainer\n    ? activeClue.hints[nextHint].explainer\n    : false;\n\n  // Prep message button\n  let messageButton;\n\n  const checkIsTodayClue = (activeClue) => {\n    const date1 = new Date(activeClue.release);\n    const date2 = new Date();\n\n    // Strip time part by setting hours, minutes, seconds, and milliseconds to zero\n    const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\n    const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\n\n    return d1.getTime() === d2.getTime();\n  };\n  const isTodayClue = checkIsTodayClue(activeClue);\n\n  // Completed with returnLearn == true\n  if (isSolution && returnLearn) {\n    messageButton = [buttons.returnLearn];\n\n    // Completed with returnLearn == true\n  } else if (checkAns && isCorrectAns && returnLearn) {\n    messageButton = [buttons.endClueShowLogic, buttons.returnLearn];\n\n    // Completed with guess and finished logic && today's clue\n  } else if (isSolution && showLogic && isTodayClue) {\n    messageButton = [buttons.shareScore, buttons.endClueHint];\n\n    // Completed with guess and finished logic &&  is not today's clue\n  } else if (isSolution && showLogic && !isTodayClue) {\n    messageButton = [buttons.endClueHint];\n\n    // Completed with guess, more clues && today's clue\n  } else if (checkAns && isCorrectAns && isTodayClue) {\n    messageButton = [\n      buttons.endClueShowLogic,\n      buttons.shareScore,\n      buttons.endClueGuess,\n    ];\n\n    // Completed with guess, more clues && is not today's clue\n  } else if (checkAns && isCorrectAns && !isTodayClue) {\n    messageButton = [buttons.endClueShowLogic, buttons.endClueGuess];\n\n    // Continue showing logic\n  } else if (showLogic && !activeClue.hints[nextHint].reveals) {\n    messageButton = [buttons.nextLogic];\n\n    // Completed with hint reveal && today's clue\n  } else if (\n    isSolution &&\n    !showLogic &&\n    solutionRevealedViaHint &&\n    isTodayClue\n  ) {\n    messageButton = [buttons.shareScore, buttons.endClueHint];\n\n    // Completed with hint reveal && not today's clue\n  } else if (\n    isSolution &&\n    !showLogic &&\n    solutionRevealedViaHint &&\n    !isTodayClue\n  ) {\n    messageButton = [buttons.endClueHint];\n\n    // Completed with hint, more clues\n  } else if (isSolution && !showLogic) {\n    messageButton = [buttons.endClueHint];\n\n    // Not complete, continue with game\n  } else {\n    messageButton = [buttons.continue];\n  }\n\n  // style message\n  let messageStyle = isSolution\n    ? \"solution\"\n    : checkAns && isCorrectAns\n      ? \"is-correct-ans\"\n      : \"continue\";\n\n  // Hide message text when tooltip shows it instead:\n  // - In showLogic mode (stepping through hints)\n  // - When solution is revealed via hint button (tooltip shows the answer)\n  const hideMessageForTooltip =\n    (showLogic && !checkAns) || (solutionRevealedViaHint && isSolution);\n\n  return (\n    <div\n      className={`message ${messageStyle} bg-white dark:!bg-neutral-800 dark:!text-neutral-100`}\n      ref={msgContainer}\n    >\n      {checkAns && isCorrectAns && <Celebration />}\n      {message && !hideMessageForTooltip && (\n        <div className={\"message-copy lc-container\"}>\n          {message}\n          {explainer && (!checkAns || isCorrectAns) && (\n            <div className={\"explainer\"}>{explainer}</div>\n          )}\n        </div>\n      )}\n\n      <ButtonContainer\n        btnArr={messageButton}\n        isSolution={isSolution}\n        stack={isSolution}\n      />\n    </div>\n  );\n};\n\nexport default Message;\n","import React from 'react'\nimport { isTodayClue } from '../dateHelpers'\n\nconst prepBottom = (\n\tactiveClue,\n\tnextHint,\n\tsetNextHint,\n\tinput,\n\tsetInput,\n\tsetShowMessage,\n\tstats,\n\tsetStats,\n\taddCompletedClue,\n\treturnLearn,\n\tsetReturnLearn,\n\tcheckAns,\n\tsetCheckAns,\n\tshowLogic,\n\tsetShowLogic,\n\trevealedLetters = []\n) => {\n\t// Check if this is today's clue\n\tconst isTodaysClue = () => isTodayClue(activeClue)\n\tconst shareScore = async () => {\n\t\tconst date = new Date(activeClue.release) // or your clue.date\n\t\tconst dateFormatted = new Intl.DateTimeFormat('en-US', {\n\t\t\tmonth: 'long',\n\t\t\tday: 'numeric',\n\t\t\tyear: 'numeric',\n\t\t}).format(date)\n\n\t\tconst perfectEmojis = [\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t\t'',\n\t\t]\n\n\t\tconst emoji =\n\t\t\tstats.guesses === 1 && stats.hints === 0\n\t\t\t\t? perfectEmojis[Math.floor(Math.random() * perfectEmojis.length)]\n\t\t\t\t: ''\n\n\t\tconst scoreText = `Learn Cryptic #${\n\t\t\tactiveClue.clid\n\t\t}\\n${dateFormatted}\\n${emoji} ${stats.guesses} ${\n\t\t\tstats.guesses === 1 ? 'guess' : 'guesses'\n\t\t}, ${stats.hints} ${\n\t\t\tstats.hints === 1 ? 'hint' : 'hints'\n\t\t}\\nlearncryptic.com`.trim()\n\n\t\tconst isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)\n\n\t\tif (isMobile && navigator.share) {\n\t\t\ttry {\n\t\t\t\tawait navigator.share({\n\t\t\t\t\ttitle: 'Clue Score',\n\t\t\t\t\ttext: scoreText,\n\t\t\t\t})\n\t\t\t\tconsole.log('Shared successfully')\n\t\t\t} catch (err) {\n\t\t\t\tif (err.name !== 'AbortError') {\n\t\t\t\t\tconsole.error('Share failed:', err)\n\t\t\t\t\talert('Could not share your score.')\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Desktop or fallback\n\t\t\ttry {\n\t\t\t\tawait navigator.clipboard.writeText(scoreText)\n\t\t\t\talert('Score copied to clipboard!')\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Clipboard copy failed:', err)\n\t\t\t\talert('Could not copy your score.')\n\t\t\t}\n\t\t}\n\t}\n\n\t// buttons\n\tconst buttons = {\n\t\tshowHint: {\n\t\t\tname: 'Show hint',\n\t\t\tstyle: 'secondary',\n\t\t\tonClick: function () {\n\t\t\t\tsetStats((prevStats) => ({ ...prevStats, hints: prevStats.hints + 1 }))\n\t\t\t\tsetCheckAns(false)\n\t\t\t\tsetShowMessage(true)\n\t\t\t},\n\t\t},\n\t\trevealSolution: {\n\t\t\tname: 'Reveal solution',\n\t\t\tstyle: 'alt',\n\t\t\tonClick: function () {\n\t\t\t\t// addCompletedClue(activeClue, stats, 'h')\n\t\t\t\t// setStats((prevStats) => ({ ...prevStats, hints: prevStats.hints + 1 }))\n\t\t\t\tsetShowMessage(true)\n\t\t\t\tsetInput([])\n\t\t\t},\n\t\t},\n\t\tcheckAnswer: {\n\t\t\tname: 'Check answer',\n\t\t\tstyle: 'primary',\n\t\t\tonClick: function () {\n\t\t\t\tlet correct =\n\t\t\t\t\tinput.join('').toUpperCase() ===\n\t\t\t\t\tactiveClue.solution.arr.join('').toUpperCase()\n\t\t\t\tif (correct) {\n\t\t\t\t\taddCompletedClue(activeClue, stats, 'g')\n\t\t\t\t\tsetStats((prevStats) => ({\n\t\t\t\t\t\t...prevStats,\n\t\t\t\t\t\tguesses: prevStats.guesses + 1,\n\t\t\t\t\t}))\n\t\t\t\t\t// Show source when correctly guessed\n\t\t\t\t\tif (activeClue.source?.ref?.current) {\n\t\t\t\t\t\tactiveClue.source.ref.current.classList.add('show')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetStats((prevStats) => ({\n\t\t\t\t\t\t...prevStats,\n\t\t\t\t\t\tguesses: prevStats.guesses + 1,\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t\tsetCheckAns(true)\n\t\t\t\tsetShowMessage(true)\n\t\t\t},\n\t\t},\n\t\tcontinue: {\n\t\t\tname: 'Continue',\n\t\t\tstyle: 'primary',\n\t\t\tonClick: function () {\n\t\t\t\tsetShowMessage(false)\n\t\t\t\t!checkAns && setNextHint(nextHint + 1)\n\t\t\t\tsetCheckAns(false)\n\t\t\t},\n\t\t},\n\t\tendClueHint: {\n\t\t\tpath: '/clues',\n\t\t\tname: 'Play more',\n\t\t\tstyle: 'secondary',\n\t\t\tonClick: function () {\n\t\t\t\tsetReturnLearn(false)\n\t\t\t\tsetStats({ guesses: 0, hints: 0, how: '' })\n\t\t\t},\n\t\t},\n\t\tendClueGuess: {\n\t\t\tpath: '/clues',\n\t\t\tname: 'Play more',\n\t\t\tstyle: 'secondary',\n\t\t\tonClick: function () {\n\t\t\t\tsetReturnLearn(false)\n\t\t\t\tsetStats({ guesses: 0, hints: 0, how: '' })\n\t\t\t},\n\t\t},\n\t\tshareScore: {\n\t\t\tname: `Share score`,\n\t\t\timg: (\n\t\t\t\t<svg\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\n\t\t\t\t\twidth='24'\n\t\t\t\t\theight='24'\n\t\t\t\t\tfill='none'\n\t\t\t\t\tstroke='currentColor'\n\t\t\t\t\tstrokeWidth='2'\n\t\t\t\t\tstrokeLinecap='round'\n\t\t\t\t\tstrokeLinejoin='round'\n\t\t\t\t\tviewBox='0 0 24 24'\n\t\t\t\t>\n\t\t\t\t\t<circle cx='6' cy='12' r='2' />\n\t\t\t\t\t<circle cx='18' cy='6' r='2' />\n\t\t\t\t\t<circle cx='18' cy='18' r='2' />\n\t\t\t\t\t<line x1='8' y1='11' x2='16' y2='7' />\n\t\t\t\t\t<line x1='8' y1='13' x2='16' y2='17' />\n\t\t\t\t</svg>\n\t\t\t),\n\t\t\tstyle: 'secondary',\n\t\t\tonClick: function () {\n\t\t\t\tshareScore()\n\t\t\t},\n\t\t},\n\t\tendClueShowLogic: {\n\t\t\tname: 'Show logic',\n\t\t\tstyle: 'alt',\n\t\t\tonClick: function () {\n\t\t\t\tsetShowLogic(true)\n\t\t\t\tsetCheckAns(false)\n\t\t\t\tsetShowMessage(true)\n\t\t\t},\n\t\t},\n\t\tnextLogic: {\n\t\t\tname: 'Next',\n\t\t\tstyle: 'alt',\n\t\t\tonClick: function () {\n\t\t\t\tsetNextHint(nextHint + 1)\n\t\t\t\tsetCheckAns(false)\n\t\t\t\tsetShowMessage(true)\n\t\t\t},\n\t\t},\n\t\treturnLearn: {\n\t\t\tpath: `/learn/${returnLearn}#next`,\n\t\t\tname: 'Return',\n\t\t\tstyle: 'secondary',\n\t\t\tonClick: function () {\n\t\t\t\tsetReturnLearn(false)\n\t\t\t\tsetStats({ guesses: 0, hints: 0, how: '' })\n\t\t\t},\n\t\t},\n\t}\n\n\t// No buttons needed - hint icon with confirmation handles reveal\n\tlet btnArr = []\n\n\t// Check if all positions are filled (either typed or revealed)\n\tconst allPositionsFilled = activeClue.solution.arr.every((_, index) => {\n\t\treturn input[index] && input[index] !== ''\n\t})\n\n\tconst isCorrectAns =\n\t\tinput.join('').toUpperCase() ===\n\t\tactiveClue.solution.arr.join('').toUpperCase()\n\tconst isSolution = activeClue.hints.length - 1 === nextHint && !checkAns\n\n\treturn { buttons, btnArr, checkAns, setCheckAns, isSolution, isCorrectAns, allPositionsFilled, checkAnswer: buttons.checkAnswer.onClick }\n}\n\nexport default prepBottom\n","import React from 'react'\n\nimport ButtonContainer from './bottom/ButtonContainer'\nimport Keyboard from './bottom/Keyboard'\nimport Message from './bottom/Message'\n\nimport prepBottom from '../utils/bottom/prepBottom'\n\nconst Bottom = ({ activeClue, showMessage, setShowMessage, nextHint, setNextHint, addCompletedClue, handleInput, input, setInput, stats, setStats, returnLearn, setReturnLearn, checkAns, setCheckAns, showLogic, setShowLogic, revealedLetters, solutionRevealedViaHint }) => {\n\n\tlet { buttons, btnArr, isSolution, isCorrectAns, allPositionsFilled, checkAnswer } = prepBottom(activeClue, nextHint, setNextHint, input, setInput, setShowMessage, stats, setStats, addCompletedClue, returnLearn, setReturnLearn, checkAns, setCheckAns, showLogic, setShowLogic, revealedLetters)\n\n\t// Show Message component for completion states (correct answer, incorrect answer feedback, solution revealed, or show logic mode)\n\tconst showCompletionMessage = checkAns || isSolution || showLogic\n\n\treturn(\n\t\t<div className='bottom bg-white dark:!bg-neutral-800 border-t border-neutral-200 dark:!border-neutral-700'>\n\t\t\t{showCompletionMessage && showMessage ?\n\t\t\t\t<Message\n\t\t\t\t\tsetShowMessage={setShowMessage}\n\t\t\t\t\tactiveClue={activeClue}\n\t\t\t\t\tnextHint={nextHint}\n\t\t\t\t\tsetNextHint={setNextHint}\n\t\t\t\t\tinput={input}\n\t\t\t\t\tcheckAns={checkAns}\n\t\t\t\t\tsetCheckAns={setCheckAns}\n\t\t\t\t\taddCompletedClue={addCompletedClue}\n\t\t\t\t\tisCorrectAns={isCorrectAns}\n\t\t\t\t\tisSolution={isSolution}\n\t\t\t\t\treturnLearn={returnLearn}\n\t\t\t\t\tbuttons={buttons}\n\t\t\t\t\tshowLogic={showLogic}\n\t\t\t\t\tsetShowLogic={setShowLogic}\n\t\t\t\t\tsolutionRevealedViaHint={solutionRevealedViaHint}\n\t\t\t\t\tstats={stats}\n\t\t\t\t/> :\n\t\t\t\t<>\n\t\t\t\t\t<ButtonContainer\n\t\t\t\t\t\tbtnArr={btnArr}\n\t\t\t\t\t/>\n\t\t\t\t\t<Keyboard\n\t\t\t\t\t\thandleInput={handleInput}\n\t\t\t\t\t\tonEnter={checkAnswer}\n\t\t\t\t\t\tcanCheckAnswer={allPositionsFilled}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nexport default Bottom\n","import React from 'react'\nimport { useStaticQuery, graphql } from 'gatsby'\n\nconst Tooltip = ({ text }) => {\n\tconst data = useStaticQuery(graphql`\n\t\tquery AllTypeQuery {\n\t\t\tallTypeJson {\n\t\t\t\tnodes {\n\t\t\t\t\ttype\n\t\t\t\t\tdescription\n\t\t\t\t\texample\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`)\n\n\tconst matchType = data.allTypeJson.nodes.find(\n\t\t(type) => type.type.toUpperCase() === text.toUpperCase()\n\t)\n\n\treturn (\n\t\t<div role='tooltip' className='tooltip' id={text}>\n\t\t\t<p className='tooltip-description'>{matchType.description}</p>\n\t\t\t<p className='tooltip-example'>{matchType.example}</p>\n\t\t</div>\n\t)\n}\n\nexport default Tooltip\n","import React, { useEffect, useRef } from 'react'\nimport getMessage from '../utils/bottom/getMessage'\n\nconst HintTooltip = ({ hint, position, onDismiss }) => {\n\tconst tooltipRef = useRef(null)\n\tconst arrowRef = useRef(null)\n\n\t// Calculate clamped position to keep tooltip within viewport\n\tuseEffect(() => {\n\t\tif (tooltipRef.current && arrowRef.current && position) {\n\t\t\tconst rect = tooltipRef.current.getBoundingClientRect()\n\t\t\tconst viewportWidth = window.innerWidth\n\t\t\tconst padding = 16\n\n\t\t\t// Calculate where the tooltip would ideally be centered\n\t\t\tconst idealLeft = position.x\n\n\t\t\t// Adjust horizontal position if tooltip would overflow\n\t\t\tlet adjustedLeft = idealLeft\n\t\t\tif (rect.left < padding) {\n\t\t\t\tadjustedLeft = padding + rect.width / 2\n\t\t\t} else if (rect.right > viewportWidth - padding) {\n\t\t\t\tadjustedLeft = viewportWidth - padding - rect.width / 2\n\t\t\t}\n\n\t\t\t// Calculate how much the tooltip shifted\n\t\t\tconst shift = adjustedLeft - idealLeft\n\n\t\t\tif (shift !== 0) {\n\t\t\t\ttooltipRef.current.style.left = `${adjustedLeft}px`\n\t\t\t\t// Move arrow in opposite direction to point at original position\n\t\t\t\t// Arrow is at 50% by default, so we offset it by the shift amount\n\t\t\t\tconst arrowOffset = 50 - (shift / rect.width) * 100\n\t\t\t\t// Clamp arrow position to stay within tooltip bounds\n\t\t\t\tconst clampedOffset = Math.max(10, Math.min(90, arrowOffset))\n\t\t\t\tarrowRef.current.style.left = `${clampedOffset}%`\n\t\t\t} else {\n\t\t\t\t// Reset arrow to center if no shift needed\n\t\t\t\tarrowRef.current.style.left = '50%'\n\t\t\t}\n\t\t}\n\t}, [position])\n\n\tif (!hint || !position) return null\n\n\tconst message = getMessage(hint)\n\tconst explainer = hint.explainer || null\n\n\treturn (\n\t\t<div\n\t\t\tref={tooltipRef}\n\t\t\tclassName=\"hint-tooltip\"\n\t\t\tstyle={{\n\t\t\t\tposition: 'fixed',\n\t\t\t\ttop: position.y - 12,\n\t\t\t\tleft: position.x,\n\t\t\t\ttransform: 'translate(-50%, -100%)',\n\t\t\t\tzIndex: 100,\n\t\t\t}}\n\t\t\tonClick={(e) => e.stopPropagation()}\n\t\t>\n\t\t\t<div className=\"hint-tooltip-content\">\n\t\t\t\t{message && <div className=\"hint-tooltip-message\">{message}</div>}\n\t\t\t\t{explainer && <div className=\"hint-tooltip-explainer\">{explainer}</div>}\n\t\t\t</div>\n\t\t\t<div ref={arrowRef} className=\"hint-tooltip-arrow\" />\n\t\t</div>\n\t)\n}\n\nexport default HintTooltip\n","// returns an array of refs for clue letter that match with a string or array of strings of target(s)\nconst getTargetLetters = (letters, activeClue, hint) => {\n\t// If an array of values\n\tif (Array.isArray(letters)) {\n\t\t// Get each index in clue of val\n\t\tconst targetLettersStartArr = letters.map((val) => {\n\t\t\treturn activeClue.clue.value.indexOf(val)\n\t\t})\n\n\t\t// Special case where ref is not part of clue\n\t\tif (\n\t\t\t(hint.category === 'particle' ||\n\t\t\t\thint.category === 'container' ||\n\t\t\t\thint.category === 'anagram' ||\n\t\t\t\thint.category === 'letter bank') &&\n\t\t\tArray.isArray(targetLettersStartArr) &&\n\t\t\ttargetLettersStartArr[0] === -1\n\t\t) {\n\t\t\tactiveClue.hints.find((h) => {\n\t\t\t\tif (!!h.end && h.end.value && h.end.value[0] === letters[0]) {\n\t\t\t\t\treturn h.addLetters.ref.current\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t})\n\n\t\t\t// Ref found in clue\n\t\t} else {\n\t\t\t// get each range of clue refs\n\t\t\tlet clueLetters = []\n\t\t\ttargetLettersStartArr.forEach((targetLettersStart, index) => {\n\t\t\t\tclueLetters.push(\n\t\t\t\t\t...activeClue.clue.ref.current.slice(\n\t\t\t\t\t\ttargetLettersStart,\n\t\t\t\t\t\ttargetLettersStart + letters[index].length\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t})\n\t\t\treturn clueLetters\n\t\t}\n\n\t\t// Just a string value\n\t} else {\n\t\tlet targetLettersStart, strSlice\n\n\t\tif (hint.category === 'direct') {\n\t\t\t// remove definition\n\t\t\tlet freshValue = activeClue.clue.value.replace(\n\t\t\t\tactiveClue.hints[0].value,\n\t\t\t\t''\n\t\t\t)\n\t\t\tlet freshValueIndex = activeClue.clue.value.indexOf(freshValue)\n\n\t\t\ttargetLettersStart = freshValue.indexOf(` ${letters}`) + 1\n\n\t\t\tstrSlice = activeClue.clue.ref.current.slice(\n\t\t\t\tfreshValueIndex + targetLettersStart,\n\t\t\t\tfreshValueIndex + targetLettersStart + letters.length\n\t\t\t)\n\t\t} else {\n\t\t\ttargetLettersStart = activeClue.clue.value.indexOf(letters)\n\t\t\tstrSlice = activeClue.clue.ref.current.slice(\n\t\t\t\ttargetLettersStart,\n\t\t\t\ttargetLettersStart + letters.length\n\t\t\t)\n\t\t}\n\n\t\treturn strSlice\n\t}\n}\n\nexport default getTargetLetters\n","// remove special characters from ref\n\nconst removeSpecial = (charArr) => {\n\t\n\tconst specialChar = [' ', ',', '-', '_', ':', ':', '\"', \"'\", '?', '!', '.', ';', '(', ')', '[', ']', '{', '}', '/', '\\\\']\n\n\n\tif (typeof(charArr) === 'string') {\n\n\t\tcharArr = charArr.split('')\n\t\treturn charArr.filter(char => !specialChar.includes(char)).join('')\n\n\t} else {\n\n\t\treturn charArr.filter(ref => {\n\t\t\t\n\t\t\t// remove any special characters from ref area\n\t\t\treturn !specialChar.includes(ref.current.textContent)\n\t\t})\n\t}\n}\n\nexport default removeSpecial","import removeSpecial from './removeSpecialChar'\n\n// locks letters into a fixed position based on their initial render position\nconst fixLetters = (activeClue, hint, index) => {\n\n\t// FN to position letters //\n\tconst positionLetters = (\n\t\thint,\n\t\tanchor = hint.fix.anchor,\n\t\tmoving = hint.fix.moving\n\t) => {\n\t\t// Keep track of used anchors\n\t\tlet anchorUsed = []\n\n\t\tmoving.forEach((ref) => {\n\t\t\tref.current.style.position = 'fixed'\n\t\t})\n\n\t\tmoving.forEach((ref) => {\n\t\t\t// Matching letter in anchor\n\t\t\tconst currentDestLetter = anchor.find((destLetter, index) => {\n\t\t\t\t// Remove anchor to not reuse\n\t\t\t\tif (hint.fix.removeAnchor) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tdestLetter.current.textContent.toUpperCase() ===\n\t\t\t\t\t\t\tref.current.textContent.toUpperCase() &&\n\t\t\t\t\t\t!anchorUsed.includes(index)\n\t\t\t\t\t) {\n\t\t\t\t\t\tanchorUsed.push(index)\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tdestLetter.current.textContent.toUpperCase() ===\n\t\t\t\t\t\t\tref.current.textContent.toUpperCase()\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tdestLetter.current.textContent.toUpperCase() ===\n\t\t\t\t\t\tref.current.textContent.toUpperCase()\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Skip positioning if no matching letter found (e.g., special characters)\n\t\t\tif (!currentDestLetter) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Add position attributes\n\t\t\tref.current.style.top = !!currentDestLetter.current.style.top\n\t\t\t\t? `${Math.round(Number(currentDestLetter.current.style.top.slice(0, -2)))}px`\n\t\t\t\t: `${Math.round(currentDestLetter.current.getBoundingClientRect().top + 1)}px`\n\t\t\tref.current.style.left = !!currentDestLetter.current.style.left\n\t\t\t\t? `${Math.round(Number(currentDestLetter.current.style.left.slice(0, -2)))}px`\n\t\t\t\t: `${Math.round(currentDestLetter.current.getBoundingClientRect().left)}px`\n\t\t})\n\n\t\t// Letters are already set to fixed position above\n\n\t\t// Add position attributes\n\t\thint.fix.endPt.forEach((ref) => {\n\t\t\tlet left = Math.round(ref.current.getBoundingClientRect().left)\n\t\t\tlet top = Math.round(ref.current.getBoundingClientRect().top + 2)\n\t\t\tref.current.style.left = `${left}px`\n\t\t\tref.current.style.top = `${top}px`\n\t\t\treturn [left, top]\n\t\t})\n\n\t\t// Fix after adding pos attributes\n\t\t// hint.fix.endPt.forEach( ref => { ref.current.style.position = 'fixed' })\n\t}\n\n\t//\n\t// LOGIC //\n\t//\n\thint.fix = { removeAnchor: true }\n\tconst prevHint = activeClue.hints[index - 1]\n\n\tswitch (hint.category) {\n\t\tcase 'ag-2':\n\t\t\thint.fix.anchor = prevHint.addLetters.ref.current // anchor letters\n\t\t\thint.fix.moving = hint.addLetters.ref.current.slice(\n\t\t\t\t0,\n\t\t\t\thint.end.value[0].length\n\t\t\t) // moving letters\n\t\t\thint.fix.endPt = hint.addLetters.ref.current.slice(\n\t\t\t\thint.end.value[0].length\n\t\t\t) // staging area letters\n\n\t\t\t// fix word with. Helps to place hints following this inline. Only run when there are hints following ag-2. Othewise it can mess with layout\n\t\t\t// hint.fix.wordWidth = hint.fix.moving.reduce((total, ltr) => total + ltr.current.getBoundingClientRect().width, 0)\n\t\t\t// activeClue.hints.length > (index + 1) && (hint.addLetters.wordRef.current.style.width = `${hint.fix.wordWidth + 8}px`)\n\n\t\t\tpositionLetters(hint)\n\t\t\tbreak\n\n\t\tcase 'lb-2':\n\t\t\thint.fix.anchor = prevHint.addLetters.ref.current // anchor letters\n\t\t\thint.fix.moving = hint.addLetters.ref.current.slice(\n\t\t\t\t0,\n\t\t\t\thint.end.value[1].length\n\t\t\t) // moving letters\n\t\t\thint.fix.endPt = hint.addLetters.ref.current.slice(\n\t\t\t\thint.end.value[1].length\n\t\t\t) // staging area letters\n\t\t\thint.fix.removeAnchor = false\n\n\t\t\t// fix word with. Helps to place hints following this inline. Only run when there are hints following ag-2. Othewise it can mess with layout\n\t\t\t// hint.fix.wordWidth = hint.fix.moving.reduce((total, ltr) => total + ltr.current.getBoundingClientRect().width, 0)\n\t\t\t// activeClue.hints.length > (index + 1) && (hint.addLetters.wordRef.current.style.width = `${hint.fix.wordWidth + 8}px`)\n\n\t\t\tpositionLetters(hint)\n\t\t\tbreak\n\n\t\tcase 'hw-2':\n\t\t\tlet solIndex = removeSpecial(prevHint.end.value[0].toUpperCase()).indexOf(\n\t\t\t\tremoveSpecial(hint.end.value[1].toUpperCase())\n\t\t\t)\n\t\t\thint.fix.anchor = removeSpecial(prevHint.addLetters.ref.current).slice(\n\t\t\t\tsolIndex,\n\t\t\t\tsolIndex + removeSpecial(activeClue.solution.value).length\n\t\t\t) // anchor letters\n\t\t\thint.fix.moving = removeSpecial(hint.addLetters.ref.current) // moving letters\n\n\t\t\thint.fix.endPt = []\n\n\t\t\t// fix word with. Helps to place hints following this inline. Only run when there are hints following ag-2. Othewise it can mess with layout\n\t\t\t// hint.fix.wordWidth = hint.fix.moving.reduce((total, ltr) => total + ltr.current.getBoundingClientRect().width, 0)\n\t\t\t// activeClue.hints.length > (index + 1) && (hint.addLetters.wordRef.current.style.width = `${hint.fix.wordWidth + 8}px`)\n\n\t\t\tpositionLetters(hint)\n\t\t\tbreak\n\n\t\tcase 'container':\n\t\t\t// Get valid previous hints\n\t\t\tlet prevHints = activeClue.hints.slice(1, index)\n\t\t\tconst skipCats = ['anagram', 'hidden word', 'letter bank', 'homophone', 'synonym']\n\t\t\tprevHints = prevHints.filter(\n\t\t\t\t(prevHint) => !skipCats.includes(prevHint.category)\n\t\t\t)\n\n\t\t\tprevHints.forEach((prevHint) => {\n\t\t\t\t// Get cell to use for split word\n\t\t\t\tswitch (prevHint.category) {\n\t\t\t\t\tcase 'direct':\n\t\t\t\t\t\tprevHint.rightValue = prevHint.value.toUpperCase()\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'reversal':\n\t\t\t\t\tcase 'ag-2':\n\t\t\t\t\t\tprevHint.rightValue = prevHint.end.value[1].toUpperCase()\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tprevHint.rightValue = prevHint.end.value[0].toUpperCase()\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Find word that is split\n\t\t\tconst possibleSplits = [[0,2], [0,3], [1,3], [0,4], [1,4], [2,4]]\n\n\t\t\t// Look at past hints to find which word is split\n\t\t\thint.fix.anchorSplit = prevHints.find((h, hIndex) => {\n\n\t\t\t\t// Try to find a match\n\t\t\t\tconst foundSplit = possibleSplits.find(split => (h.rightValue === [hint.end.value[split[0]], hint.end.value[split[1]]].join('').toUpperCase() && !!hint.end.value[split[1]]));\n\n\t\t\t\t// If match found, add the data\n\t\t\t\tconst logSplits = foundSplit => {\n\t\t\t\t\thint.fix.joinIndex = [foundSplit[0], foundSplit[1]]\n\t\t\t\t\thint.fix.indicatorMatch = hIndex\n\t\t\t\t\treturn h.rightValue === [hint.end.value[foundSplit[0]], hint.end.value[foundSplit[1]]].join('').toUpperCase()\n\t\t\t\t};\n\n\t\t\t\treturn foundSplit ? logSplits(foundSplit) : false;\n\t\t\t})\n\n\t\t\t// Remove duplicate letter from special hints\n\t\t\tconst doubleHints = ['ag-2', 'lb-2', 'reversal']\n\t\t\tif (doubleHints.includes(hint.fix.anchorSplit.category)) {\n\t\t\t\thint.fix.anchorSplit =\n\t\t\t\t\thint.fix.anchorSplit.addLetters.ref.current.slice(\n\t\t\t\t\t\thint.fix.anchorSplit.end.value[0].length\n\t\t\t\t\t)\n\t\t\t} else {\n\t\t\t\thint.fix.anchorSplit = hint.fix.anchorSplit.addLetters.ref.current\n\t\t\t}\n\n\t\t\t// anchorOther - get other anchor words //\n\t\t\t// Remove splitword from prevHints\n\t\t\tprevHints.splice(hint.fix.indicatorMatch, 1)\n\n\t\t\t// find non-split words/letters\n\t\t\thint.fix.anchorOther = []\n\t\t\thint.end.value.forEach((hend, index) => {\n\t\t\t\tif (!hint.fix.joinIndex.includes(index)) {\n\t\t\t\t\tconst thisMatch = prevHints.find(\n\t\t\t\t\t\t(h, hIndex) => h.rightValue.toUpperCase() === hend.toUpperCase()\n\t\t\t\t\t)\n\t\t\t\t\tif (thisMatch && doubleHints.includes(thisMatch.category)) {\n\t\t\t\t\t\thint.fix.anchorOther.push(\n\t\t\t\t\t\t\t...thisMatch.addLetters.ref.current.slice(\n\t\t\t\t\t\t\t\tthisMatch.end.value[0].length\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t} else if (thisMatch) {\n\t\t\t\t\t\thint.fix.anchorOther.push(...thisMatch.addLetters.ref.current)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// MOVING SPLIT\n\t\t\tconst movingLStart = hint.end.value\n\t\t\t\t.slice(0, hint.fix.joinIndex[0])\n\t\t\t\t.join('').length\n\t\t\tconst movingLLength = hint.end.value[hint.fix.joinIndex[0]].length\n\t\t\tconst movingRStart = hint.end.value\n\t\t\t\t.slice(0, hint.fix.joinIndex[1])\n\t\t\t\t.join('').length\n\t\t\tconst movingRLength = hint.end.value[hint.fix.joinIndex[1]].length\n\n\t\t\thint.fix.movingSplit = [\n\t\t\t\t...hint.addLetters.ref.current.slice(\n\t\t\t\t\tmovingLStart,\n\t\t\t\t\tmovingLStart + movingLLength\n\t\t\t\t),\n\t\t\t\t...hint.addLetters.ref.current.slice(\n\t\t\t\t\tmovingRStart,\n\t\t\t\t\tmovingRStart + movingRLength\n\t\t\t\t),\n\t\t\t]\n\n\t\t\thint.fix.movingOther = hint.addLetters.ref.current\n\t\t\t\t.slice(0, hint.end.value.join('').split('').length)\n\t\t\t\t.filter((ref) => !hint.fix.movingSplit.includes(ref))\n\n\t\t\t// Destination letters\n\t\t\thint.fix.endPt = hint.addLetters.ref.current.slice(\n\t\t\t\thint.end.value.join('').split('').length\n\t\t\t)\n\n\t\t\t// fix word with. Helps to place hints following this inline. Only run when there are hints following ag-2. Othewise it can mess with layout\n\t\t\t// hint.fix.wordWidth = [...hint.fix.movingSplit, ...hint.fix.movingOther].reduce((total, ltr) => total + ltr.current.getBoundingClientRect().width, 0)\n\t\t\t// activeClue.hints.length > (index + 1) && (hint.addLetters.wordRef.current.style.width = `${hint.fix.wordWidth + 8}px`)\n\n\t\t\tpositionLetters(hint, hint.fix.anchorSplit, hint.fix.movingSplit)\n\t\t\tpositionLetters(hint, hint.fix.anchorOther, hint.fix.movingOther)\n\t\t\tbreak\n\n\t\tcase 'reversal':\n\t\t\t// push only used anchor to anchor\n\t\t\thint.fix.anchor = []\n\t\t\tactiveClue.hints.some((h) => {\n\t\t\t\tif (h.category === 'reversal') return true\n\t\t\t\tif (h.addLetters) {\n\t\t\t\t\thint.fix.anchor.push(h)\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t})\n\n\t\t\thint.fix.anchor = hint.fix.anchor\n\t\t\t\t.map((h) => h.addLetters.ref.current)\n\t\t\t\t.flat()\n\t\t\t\t.reverse()\n\t\t\thint.fix.moving = hint.addLetters.ref.current.slice(\n\t\t\t\t0,\n\t\t\t\thint.end.value[0].length\n\t\t\t) // moving letters\n\t\t\thint.fix.moving = hint.fix.moving\n\t\t\t\t.filter((m) => m.current.textContent !== ' ')\n\t\t\t\t.reverse()\n\n\t\t\t// fix word with. Helps to place hints following this inline. Only run when there are hints following reversal. Othewise it can mess with reversal layout\n\t\t\thint.fix.wordWidth = hint.fix.moving.reduce(\n\t\t\t\t(total, ltr) => total + ltr.current.getBoundingClientRect().width,\n\t\t\t\t0\n\t\t\t)\n\t\t\t// const revIndex = activeClue.hints.findIndex(h=>h.category==='reversal')\n\t\t\t// activeClue.hints.length > (revIndex + 1) && (hint.addLetters.wordRef.current.style.width = `${hint.fix.wordWidth + 8}px`)\n\n\t\t\thint.fix.endPt = hint.addLetters.ref.current.slice(\n\t\t\t\thint.end.value[0].length\n\t\t\t) // staging area letters\n\n\t\t\tpositionLetters(hint)\n\t\t\tbreak\n\n\t\tdefault:\n\t\t\tbreak\n\t}\n}\n\nexport default fixLetters\n","import removeSpecial from \"./removeSpecialChar\"\n\n// adds letters that will be needed as either duplicates or are not within the original clue\nconst addLetters = (activeClue, hint) => {\n\t\n\tif (hint && hint.type === 'indicator') { \n\t\thint.addLetters = { ref: { current: [] } }\n\t\t\n\t\tif (!hint.end || !hint.end.value) {\n\t\t\thint.addLetters.value = []\n\t\t\treturn\n\t\t}\n\n\t\tswitch(hint.category) {\n\t\t\tcase 'anagram':\n\t\t\tcase 'hidden word':\n\t\t\tcase 'letter bank':\n\t\t\tcase 'particle':\n\t\t\tcase 'symbol':\n\t\t\t\thint.addLetters.value = hint.end.value[0] ? hint.end.value[0].split('') : []\n\t\t\t\tbreak\n\n\t\t\tcase 'synonym':\n\t\t\t\thint.addLetters.value = []\n\t\t\t\tbreak\n\n\t\t\tcase 'sy-2':\n\t\t\t\thint.addLetters.value = hint.end.value[0] ? hint.end.value[0].split('') : []\n\t\t\t\tbreak\n\n\t\t\tcase 'container':\n\t\t\t\thint.addLetters.value = hint.end.value.length > 0 ? [...hint.end.value.join(\"\").split(''), ...hint.end.value.join(\" \").split('')] : []\n\t\t\t\tbreak\n\n\t\t\tcase 'lb-2':\n\t\t\t\thint.addLetters.value = hint.end.value[1] ? [...hint.end.value[1], ...hint.end.value[1]] : []\n\t\t\t\tbreak\n\n\t\t\tcase 'direct':\n\t\t\t\thint.addLetters.value = hint.value.split('')\n\t\t\t\tbreak\n\n\t\t\tcase 'homophone':\n\t\t\t\thint.addLetters.value = ['= ', activeClue.solution.value]\n\t\t\t\tbreak\n\n\t\t\tcase 'hw-2':\n\t\t\t\thint.addLetters.value = hint.end.value[1] ? removeSpecial(hint.end.value[1]).split('') : []\n\t\t\t\tbreak\n\n\t\t\tcase 'initialism':\n\t\t\t\thint.addLetters.value = hint.end.value.length > 0 ? hint.end.value.map(endPt => {\n\t\t\t\t\treturn endPt ? endPt.split(' ').map(word => word.split('')[0]).flat() : []\n\t\t\t\t}).flat() : []\n\t\t\t\tbreak\n\n\t\t\tcase 'ag-2':\n\t\t\tcase 'reversal':\n\t\t\t\thint.addLetters.value = hint.end.value.length > 0 ? hint.end.value.map(endPt => endPt ? endPt.split('') : []).flat() : []\n\t\t\t\tbreak\n\n\t\t\tcase 'spoonerism':\n\t\t\t\thint.addLetters.value = hint.end.value[1] ? hint.end.value[1].split('') : []\n\t\t\t\tbreak\n\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\t}\n}\n\nexport default addLetters","import { useRef, createRef, useEffect } from 'react'\n\nimport getTargetLetters from './getTargetLetters'\nimport fixLetters from './fixLetters'\nimport addLetters from './addLetters'\nimport creators from '../../assets/data/creators.json'\n\nconst usePrepClue = (dataClue) => {\n\tlet activeClue = structuredClone(dataClue)\n\n\tuseEffect(() => console.log(activeClue), [dataClue])\n\n\t// get solution letters\n\tconst getSolutionLetters = (solution) =>\n\t\tsolution.value.split(' ').map((word) => word.length)\n\tactiveClue.solution.length = {\n\t\tvalue: `(${getSolutionLetters(activeClue.solution).join(', ')})`,\n\t\tarr: getSolutionLetters(activeClue.solution),\n\t}\n\n\t// build clue and solution arrays\n\tactiveClue.clue.arr = activeClue.clue.value.split('')\n\tactiveClue.solution.arr = activeClue.solution.value.split('')\n\tactiveClue.solution.arr = activeClue.solution.arr.filter((ltr) => ltr !== ' ')\n\n\t// build type array\n\tactiveClue.type = activeClue.type.split(', ')\n\n\t// clue source\n\tconst creator = creators.find(\n\t\t(creator) => creator.nom === activeClue.source.value\n\t)\n\tif (creator) {\n\t\tactiveClue.source.href = creator.link\n\t} else {\n\t\tactiveClue.source.href = false\n\t}\n\n\t// add hint type\n\tif (activeClue.hints) {\n\t\tactiveClue.hints.map((hint) => (hint.type = 'indicator'))\n\t\tactiveClue.hints = activeClue.hints.flatMap((obj) => {\n\t\t\tif (obj.category === 'anagram') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'ag-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\tif (obj.category === 'hidden word') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'hw-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\tif (obj.category === 'homophone') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'hp-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\tif (obj.category === 'initialism') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'in-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\tif (obj.category === 'letter bank') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'lb-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\tif (obj.category === 'synonym') {\n\t\t\t\treturn [\n\t\t\t\t\t{ ...obj, explainer: '' },\n\t\t\t\t\t{ ...obj, category: 'sy-2' },\n\t\t\t\t]\n\t\t\t}\n\t\t\treturn [obj]\n\t\t})\n\t} else {\n\t\tactiveClue.hints = []\n\t}\n\n\t// Add definition(s)\n\tif (!activeClue.type.includes('double definition')) {\n\t\tactiveClue.hints.unshift({\n\t\t\ttype: 'definition',\n\t\t\tvalue: activeClue.definition,\n\t\t})\n\t\tactiveClue.hints[activeClue.hints.length - 1].reveals = true\n\t} else {\n\t\tactiveClue.hints.unshift(\n\t\t\t{ type: 'definition', value: activeClue.definition },\n\t\t\t{\n\t\t\t\ttype: 'indicator',\n\t\t\t\tcategory: 'dd-2',\n\t\t\t\texplainer: false,\n\t\t\t\tvalue: activeClue.definition,\n\t\t\t\treveals: true,\n\t\t\t\tend: {\n\t\t\t\t\tvalue: activeClue.definition,\n\t\t\t\t},\n\t\t\t}\n\t\t)\n\t}\n\n\t// build refs\n\tactiveClue.clue.ref = useRef(activeClue.clue.arr.map(() => createRef())) // clue letter refs\n\tactiveClue.clue.sectionRef = useRef() // clue section ref\n\tactiveClue.solution.ref = useRef(\n\t\tactiveClue.solution.arr.map(() => createRef())\n\t) // solution letter refs\n\tactiveClue.solution.sectionRef = useRef() // solution section ref\n\tactiveClue.solution.length.ref = useRef() // solution length ref\n\tactiveClue.source.ref = useRef() // source ref\n\tactiveClue.spoon = useRef() // source ref\n\tactiveClue.addLetters = { ref: useRef([]) } // add letters ref\n\n\t// hint target refs\n\tactiveClue.hints.forEach((hint) => {\n\t\t// add extra letters needed\n\t\taddLetters(activeClue, hint)\n\n\t\t// indicator letters\n\t\thint.ref = getTargetLetters(hint.value, activeClue, hint)\n\n\t\t// indicator end letters\n\t\tif (!!hint.end) {\n\t\t\thint.end.ref = getTargetLetters(hint.end.value, activeClue, hint)\n\t\t}\n\t})\n\n\t// add letters\n\tactiveClue.hints.forEach((hint, index) => {\n\t\tif (hint.addLetters && hint.addLetters.value) {\n\t\t\tactiveClue.addLetters.ref.current.push(\n\t\t\t\thint.addLetters.value.map(() => createRef())\n\t\t\t)\n\t\t\thint.addLetters.ref.current = activeClue.addLetters.ref.current[index]\n\t\t} else {\n\t\t\tactiveClue.addLetters.ref.current.push([])\n\t\t}\n\t})\n\n\tuseEffect(() => {\n\t\t// Fix letters - use double requestAnimationFrame to ensure flexbox layout has settled\n\t\t// This is critical for mobile where the addLetters flexbox container needs time to calculate\n\t\t// final positions before getBoundingClientRect() is called\n\t\trequestAnimationFrame(() => {\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tconst fixList = ['ag-2', 'hw-2', 'lb-2', 'container', 'reversal']\n\t\t\t\tactiveClue.hints.forEach((hint, index) => {\n\t\t\t\t\thint &&\n\t\t\t\t\t\thint.category &&\n\t\t\t\t\t\tfixList.includes(hint.category) &&\n\t\t\t\t\t\tfixLetters(activeClue, hint, index)\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t}, [])\n\n\treturn { activeClue }\n}\n\nexport default usePrepClue\n","// Underlines definition letters using inline styles\n// Using inline styles instead of classList to prevent React from overwriting on re-render\nconst underlineLetters = (definitionLettersRef) => {\n\tif (!definitionLettersRef || !Array.isArray(definitionLettersRef)) return\n\n\tdefinitionLettersRef.forEach(ref => {\n\t\tif (ref && ref.current) {\n\t\t\tref.current.style.textDecoration = 'underline'\n\t\t}\n\t})\n}\n\nexport default underlineLetters","// Highlights letters in the clue by setting background color\nconst highlightLetters = (indicatedLettersRef, color = false, recheck) => {\n\t// Guard against undefined or empty arrays\n\tif (!indicatedLettersRef || !Array.isArray(indicatedLettersRef) || indicatedLettersRef.length === 0) return\n\n\t// Helper function to get CSS custom property values\n\tconst getCSSVariable = (variable) => {\n\t\treturn getComputedStyle(document.documentElement).getPropertyValue(variable).trim()\n\t}\n\n\tconst getBackgroundColor = () => {\n\t\tif (color) {\n\t\t\t// Map hardcoded colors to CSS custom properties\n\t\t\tswitch (color) {\n\t\t\t\tcase '#E1D8FF':\n\t\t\t\t\treturn getCSSVariable('--lc-highlight-bg')\n\t\t\t\tcase '#E2E2E2':\n\t\t\t\t\treturn getCSSVariable('--lc-bg-muted')\n\t\t\t\tdefault:\n\t\t\t\t\treturn color\n\t\t\t}\n\t\t} else {\n\t\t\treturn getCSSVariable('--lc-highlight-bg')\n\t\t}\n\t}\n\t\n\tindicatedLettersRef.forEach( ref => {\n\t\tif (!ref || !ref.current) return\n\t\tif (recheck) {\n\t\t\t// Set to muted gray background to show previously highlighted\n\t\t\tref.current.style.backgroundColor = getCSSVariable('--lc-bg-muted')\n\t\t} else {\n\t\t\tref.current.style.backgroundColor = getBackgroundColor()\n\t\t}\n\t})\n\n}\n\nexport default highlightLetters","const changeColor = (toChange, color = false, recheck = false) => {\n\t// Guard against undefined or null\n\tif (!toChange) return\n\n\t// Helper function to get CSS custom property values\n\tconst getCSSVariable = (variable) => {\n\t\treturn getComputedStyle(document.documentElement).getPropertyValue(variable).trim()\n\t}\n\n\tconst getColor = () => {\n\t\tif (color) {\n\t\t\t// Map hardcoded colors to CSS custom properties\n\t\t\tswitch (color) {\n\t\t\t\tcase '#7457D6':\n\t\t\t\t\treturn getCSSVariable('--lc-highlight-text')\n\t\t\t\tcase '#0B0B0B':\n\t\t\t\tcase '#0b0b0b':\n\t\t\t\t\treturn getCSSVariable('--lc-text-primary')\n\t\t\t\tcase '#222':\n\t\t\t\t\treturn getCSSVariable('--lc-text-secondary')\n\t\t\t\tcase '#ccc':\n\t\t\t\t\treturn getCSSVariable('--lc-text-muted')\n\t\t\t\tdefault:\n\t\t\t\t\treturn color\n\t\t\t}\n\t\t} else {\n\t\t\treturn getCSSVariable('--lc-highlight-text')\n\t\t}\n\t}\n\n\tif (Array.isArray(toChange)) {\n\t\ttoChange.forEach( ref => {\n\t\t\tif (!ref || !ref.current) return\n\t\t\tif (recheck) {\n\t\t\t\t// Reset to primary text color\n\t\t\t\tref.current.style.color = getCSSVariable('--lc-text-primary')\n\t\t\t} else {\n\t\t\t\tref.current.style.color = getColor()\n\t\t\t\tref.current.style.opacity = 1\n\t\t\t}\n\t\t})\n\t} else {\n\t\tif (!toChange || !toChange.current) return\n\t\tif (recheck) {\n\t\t\t// Reset to primary text color\n\t\t\ttoChange.current.style.color = getCSSVariable('--lc-text-primary')\n\t\t} else {\n\t\t\ttoChange.current.style.color = getColor()\n\t\t\ttoChange.current.style.opacity = 1\n\t\t}\n\t}\n}\n\nexport default changeColor","import removeSpecial from './removeSpecialChar'\n\n// moves letters from movingLettersRef to destLettersRef\nconst moveLetters = (\n\tmovingLettersRef,\n\tdestLettersRef,\n\ttiming = 'shuffle',\n\treverse = false\n) => {\n\tmovingLettersRef = removeSpecial(movingLettersRef)\n\n\tif (reverse) {\n\t\tmovingLettersRef = movingLettersRef.reverse()\n\t}\n\n\tmovingLettersRef.forEach((ref, index) => {\n\t\tconst currentDestLetter = destLettersRef.find((destLetter) => {\n\t\t\treturn (\n\t\t\t\tdestLetter.current.textContent.toUpperCase() ===\n\t\t\t\tref.current.textContent.toUpperCase()\n\t\t\t)\n\t\t})\n\n\t\tconst destIndex = destLettersRef.findIndex(\n\t\t\t(destLetter) =>\n\t\t\t\tdestLetter.current.textContent.toUpperCase() ===\n\t\t\t\tref.current.textContent.toUpperCase()\n\t\t)\n\t\tdestLettersRef.splice(destIndex, 1)\n\n\t\tref.current.style.textTransform = 'uppercase'\n\t\tref.current.style.top = `${Math.round(Number(\n\t\t\tcurrentDestLetter.current.style.top.slice(0, -2)\n\t\t))}px`\n\t\tref.current.style.left = `${Math.round(Number(\n\t\t\tcurrentDestLetter.current.style.left.slice(0, -2)\n\t\t))}px`\n\n\t\tswitch (timing) {\n\t\t\tcase 'shuffle':\n\t\t\t\tref.current.style.transition = `top 2.5s ease ${\n\t\t\t\t\t750 * Math.random() + 250\n\t\t\t\t}ms, left 2.5s ease ${750 * Math.random() + 250}ms`\n\t\t\t\tbreak\n\t\t\tcase 'sequence':\n\t\t\t\tref.current.style.transition = `top 1.5s ease ${\n\t\t\t\t\t200 * index\n\t\t\t\t}ms, left 1.5s ease ${200 * index}ms`\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tref.current.style.transition = `top 2.5s ease, left 2.5s ease`\n\t\t\t\tbreak\n\t\t}\n\t})\n}\n\nexport default moveLetters\n","import underlineLetters from './underlineLetters'\nimport highlightLetters from './highlightLetters'\nimport changeColor from './changeColor'\nimport moveLetters from './moveLetters'\n\nconst handleHint = (activeClue, nextHint, showMessage, checkAns, showLogic) => {\n\t\n\tconst hint = activeClue.hints[nextHint]\n\tconst prevHint = activeClue.hints[nextHint - 1]\n\n\t// Run if showing a message & not checking answer\n\tif (showMessage && !checkAns) {\n\n\t\t// Definition\n\t\tif (nextHint === 0) {\n\t\t\tunderlineLetters(hint.ref)\n\n\t\t\t// Indicators\n\t\t} else {\n\t\t\tswitch (hint.category) {\n\t\t\t\tcase 'anagram':\n\t\t\t\tcase 'letter bank':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.end.ref, '#ccc')\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'ag-2':\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current, '#ccc')\n\t\t\t\t\tchangeColor(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[0].length),\n\t\t\t\t\t\t'#0b0b0b'\n\t\t\t\t\t)\n\t\t\t\t\tmoveLetters(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[0].length),\n\t\t\t\t\t\thint.addLetters.ref.current.slice(hint.end.value[0].length)\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'lb-2':\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current, '#ccc')\n\t\t\t\t\tchangeColor(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[1].length),\n\t\t\t\t\t\t'#0b0b0b'\n\t\t\t\t\t)\n\t\t\t\t\tmoveLetters(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[1].length),\n\t\t\t\t\t\thint.addLetters.ref.current.slice(hint.end.value[1].length)\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'charade':\n\t\t\t\tcase 'symbol':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'synonym':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'sy-2':\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'container':\n\t\t\t\t\thighlightLetters(hint.ref)\n\n\t\t\t\t\t// make all previous addLetters gray\n\t\t\t\t\tactiveClue.hints.some((h) => {\n\t\t\t\t\t\t// Break out if container\n\t\t\t\t\t\tif (h.category === 'container') return true\n\n\t\t\t\t\t\tif (h.addLetters) {\n\t\t\t\t\t\t\tchangeColor(h.addLetters.ref.current, '#ccc')\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false\n\t\t\t\t\t})\n\n\t\t\t\t\t// Make moving letters dark\n\t\t\t\t\tchangeColor(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\thint.end.value.join('').split('').length\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'#222'\n\t\t\t\t\t)\n\n\t\t\t\t\tmoveLetters(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\thint.end.value.join('').split('').length\n\t\t\t\t\t\t),\n\t\t\t\t\t\thint.addLetters.ref.current.slice(\n\t\t\t\t\t\t\thint.end.value.join('').split('').length\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfalse\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'dd-2':\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'deletion':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current, '#ccc')\n\n\t\t\t\t\t// see if shorter word exists within last hint addLetters\n\t\t\t\t\tconst delIndex = prevHint.addLetters.value\n\t\t\t\t\t\t.join('')\n\t\t\t\t\t\t.toUpperCase()\n\t\t\t\t\t\t.indexOf(hint.end.value[1].toUpperCase())\n\n\t\t\t\t\t// if so, highlight short word in longer\n\t\t\t\t\tif (hint.end.value.length > 2) {\n\t\t\t\t\t\tchangeColor(\n\t\t\t\t\t\t\tprevHint.addLetters.ref.current.slice(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\thint.end.value[1].length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'#0b0b0b'\n\t\t\t\t\t\t)\n\n\t\t\t\t\t\tchangeColor(\n\t\t\t\t\t\t\tprevHint.addLetters.ref.current.slice(-hint.end.value[2].length),\n\t\t\t\t\t\t\t'#0b0b0b'\n\t\t\t\t\t\t)\n\t\t\t\t\t} else if (delIndex >= 0) {\n\t\t\t\t\t\tchangeColor(\n\t\t\t\t\t\t\tprevHint.addLetters.ref.current.slice(\n\t\t\t\t\t\t\t\tdelIndex,\n\t\t\t\t\t\t\t\tdelIndex + hint.end.value[1].length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'#0b0b0b'\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'delete even':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tconst oddOnly = prevHint.addLetters.ref.current.filter(\n\t\t\t\t\t\t(ltr, index) => index % 2 !== 0\n\t\t\t\t\t)\n\t\t\t\t\tconsole.log(oddOnly)\n\t\t\t\t\tchangeColor(oddOnly, '#ccc')\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'delete odd':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tconst evenOnly = prevHint.addLetters.ref.current.filter(\n\t\t\t\t\t\t(ltr, index) => index % 2 === 0\n\t\t\t\t\t)\n\t\t\t\t\tconsole.log(evenOnly)\n\t\t\t\t\tchangeColor(evenOnly, '#ccc')\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'direct':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'hidden word':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.end.ref, '#ccc')\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'hw-2':\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current, '#ccc')\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'homophone':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current[0])\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'hp-2':\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current[1])\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'initialism':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.end.ref)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'in-2':\n\t\t\t\t\tchangeColor(prevHint.end.ref, '#ccc')\n\t\t\t\t\t// build arrary of first letters\n\t\t\t\t\tlet firstLetters = prevHint.end.value[0]\n\t\t\t\t\t\t.split(' ')\n\t\t\t\t\t\t.map((wrd) => wrd.length + 1)\n\t\t\t\t\tfirstLetters.pop()\n\t\t\t\t\tfirstLetters = [0, ...firstLetters]\n\n\t\t\t\t\tfirstLetters.forEach((startLetter) => {\n\t\t\t\t\t\tchangeColor(prevHint.end.ref[startLetter])\n\t\t\t\t\t\tprevHint.end.ref.splice(0, startLetter)\n\t\t\t\t\t})\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'particle':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'reversal':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(prevHint.addLetters.ref.current, '#ccc')\n\n\t\t\t\t\t// make all previous addLetters gray\n\t\t\t\t\tlet usedAnchor = []\n\t\t\t\t\t// push only used anchor to anchor\n\t\t\t\t\tlet anchor = []\n\t\t\t\t\tactiveClue.hints.some((h) => {\n\t\t\t\t\t\tif (h.category === 'reversal') return true\n\t\t\t\t\t\tif (h.addLetters) {\n\t\t\t\t\t\t\tanchor.push(h)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false\n\t\t\t\t\t})\n\t\t\t\t\tanchor = anchor\n\t\t\t\t\t\t.map((h) => h.addLetters.ref.current)\n\t\t\t\t\t\t.flat()\n\t\t\t\t\t\t.reverse()\n\n\t\t\t\t\tlet moving = hint.addLetters.ref.current.slice(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\thint.end.value[0].length\n\t\t\t\t\t)\n\t\t\t\t\tmoving = moving.filter((m) => m.current.textContent !== ' ').reverse()\n\n\t\t\t\t\t// Build arr of used anchors\n\t\t\t\t\tmoving.forEach((ref) => {\n\t\t\t\t\t\tconst destIndex = anchor.findIndex(\n\t\t\t\t\t\t\t(destLetter) =>\n\t\t\t\t\t\t\t\tdestLetter.current.textContent === ref.current.textContent\n\t\t\t\t\t\t)\n\t\t\t\t\t\tusedAnchor.push(anchor[destIndex])\n\t\t\t\t\t\tanchor.splice(destIndex, 1)\n\t\t\t\t\t})\n\n\t\t\t\t\tchangeColor(usedAnchor, '#ccc')\n\t\t\t\t\tchangeColor(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[0].length),\n\t\t\t\t\t\t'#222'\n\t\t\t\t\t)\n\t\t\t\t\tmoveLetters(\n\t\t\t\t\t\thint.addLetters.ref.current.slice(0, hint.end.value[0].length),\n\t\t\t\t\t\thint.addLetters.ref.current.slice(hint.end.value[0].length),\n\t\t\t\t\t\t'sequence',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase 'spoonerism':\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.addLetters.ref.current)\n\t\t\t\t\tchangeColor(activeClue.spoon)\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\thighlightLetters(hint.ref)\n\t\t\t\t\tchangeColor(hint.end.ref)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\t// If this is the revealing hint, end clue.\n\t\tif (hint.reveals) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (activeClue.solution.sectionRef?.current) {\n\t\t\t\t\tactiveClue.solution.sectionRef.current.classList.add('hide-input')\n\t\t\t\t}\n\t\t\t}, 2500)\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (activeClue.solution.sectionRef?.current) {\n\t\t\t\t\tactiveClue.solution.sectionRef.current.classList.add('reveal-solution')\n\t\t\t\t}\n\t\t\t}, 2500)\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (activeClue.source.ref?.current) {\n\t\t\t\t\tactiveClue.source.ref.current.classList.add('show')\n\t\t\t\t}\n\t\t\t}, 2500)\n\t\t}\n\t}\n\n\t// Change last hint to gray when going back to play (regular hint mode only)\n\t// This runs when user dismisses a hint and continues playing\n\tif (nextHint > 1 && !showMessage && !checkAns && !showLogic) {\n\t\ttry {\n\t\t\t// Gray out highlighting\n\t\t\thighlightLetters(prevHint.ref, false, true)\n\n\t\t\t// Gray last added letters\n\t\t\tif (prevHint.end) {\n\t\t\t\tchangeColor(prevHint.end.ref, false, true)\n\t\t\t} else {\n\t\t\t\tchangeColor(prevHint.ref, false, true)\n\t\t\t}\n\n\t\t\t// Reset addLetters to primary color\n\t\t\tif (prevHint.category !== 'deletion') {\n\t\t\t\tchangeColor(prevHint.addLetters.ref.current, false, true)\n\t\t\t} else {\n\t\t\t\tchangeColor(activeClue.hints[nextHint - 2].addLetters.ref.current, false, true)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err)\n\t\t}\n\t}\n}\n\nexport default handleHint\n","import { useState, useEffect, useRef } from 'react'\n\nimport handleHint from './handleHint'\n\nconst useManageClue = (activeClue) => {\n\t// Keep a ref to always access the latest activeClue\n\tconst activeClueRef = useRef(activeClue)\n\tactiveClueRef.current = activeClue\n\n\t// state\n\tconst [stats, setStats] = useState({ guesses: 0, hints: 0, how: '' })\n    const [input, setInput] = useState([])\n\tconst [nextHint, setNextHint] = useState(0)\n\tconst [showMessage, setShowMessage] = useState(false)\n\tconst [checkAns, setCheckAns] = useState(false)\n\tconst [showLogic, setShowLogic] = useState(false)\n\tconst [revealedLetters, setRevealedLetters] = useState([]) // Array of indices of revealed letters\n\tconst [showRevealPrompt, setShowRevealPrompt] = useState(false)\n\tconst [revealPromptIndex, setRevealPromptIndex] = useState(null)\n\n\t// handle revealing a letter\n\tconst handleRevealLetter = (index) => {\n\t\t// Don't allow revealing if already revealed\n\t\tif (revealedLetters.includes(index)) {\n\t\t\treturn\n\t\t}\n\n\t\t// Don't allow revealing if this would be the last unrevealed letter\n\t\tif (revealedLetters.length >= activeClue.solution.arr.length - 1) {\n\t\t\treturn\n\t\t}\n\n\t\t// Add to revealed letters\n\t\tconst newRevealedLetters = [...revealedLetters, index].sort((a, b) => a - b)\n\t\tsetRevealedLetters(newRevealedLetters)\n\n\t\t// Update input to include the revealed letter\n\t\tsetInput(prevInput => {\n\t\t\tconst newInput = [...prevInput]\n\n\t\t\t// Extend array to include this position, filling gaps\n\t\t\twhile (newInput.length <= index) {\n\t\t\t\tconst currentPos = newInput.length\n\t\t\t\t// If this position is revealed (including the one we just revealed), add the letter\n\t\t\t\tif (newRevealedLetters.includes(currentPos)) {\n\t\t\t\t\tnewInput.push(activeClue.solution.arr[currentPos])\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise add empty string\n\t\t\t\t\tnewInput.push('')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure the revealed position has the correct letter (in case it was wrong)\n\t\t\tnewInput[index] = activeClue.solution.arr[index]\n\n\t\t\treturn newInput\n\t\t})\n\n\t\t// Increment hints counter\n\t\tsetStats(prev => ({ ...prev, hints: prev.hints + 1 }))\n\n\t\t// Close the prompt\n\t\tsetShowRevealPrompt(false)\n\t\tsetRevealPromptIndex(null)\n\t}\n\n\t// handle clicking on a solution square\n\tconst handleSquareClick = (index) => {\n\t\t// Don't allow clicking if already revealed\n\t\tif (revealedLetters.includes(index)) {\n\t\t\treturn\n\t\t}\n\n\t\t// Don't allow clicking if this would be the last unrevealed letter\n\t\tif (revealedLetters.length >= activeClue.solution.arr.length - 1) {\n\t\t\treturn\n\t\t}\n\n\t\t// Don't allow clicking if message is showing\n\t\tif (showMessage) {\n\t\t\treturn\n\t\t}\n\n\t\t// Show the prompt\n\t\tsetRevealPromptIndex(index)\n\t\tsetShowRevealPrompt(true)\n\t}\n\n    // handle input\n    const handleInput = (press, revealedLettersParam = revealedLetters) => {\n\t\tsetInput((prevInput) => {\n            if (press !== 'del') {\n\t\t\t\t// Find the first empty, non-revealed position\n\t\t\t\tlet insertPos = -1\n\t\t\t\tfor (let i = 0; i < activeClue.solution.arr.length; i++) {\n\t\t\t\t\tif ((!prevInput[i] || prevInput[i] === '') && !revealedLettersParam.includes(i)) {\n\t\t\t\t\t\tinsertPos = i\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If we found a position, insert the letter there\n\t\t\t\tif (insertPos >= 0) {\n\t\t\t\t\tconst newInput = [...prevInput]\n\n\t\t\t\t\t// Extend array if needed\n\t\t\t\t\twhile (newInput.length <= insertPos) {\n\t\t\t\t\t\tnewInput.push('')\n\t\t\t\t\t}\n\n\t\t\t\t\tnewInput[insertPos] = press\n\n\t\t\t\t\treturn newInput\n\t\t\t\t}\n\n                return prevInput\n            } else if (press === 'del') {\n\t\t\t\t// Find the last non-revealed, non-empty position to delete from\n\t\t\t\tlet deletePos = -1\n\t\t\t\tfor (let i = prevInput.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (!revealedLettersParam.includes(i) && prevInput[i] && prevInput[i] !== '') {\n\t\t\t\t\t\tdeletePos = i\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If we found a position to delete, remove it\n\t\t\t\tif (deletePos >= 0) {\n\t\t\t\t\tconst newInput = [...prevInput]\n\t\t\t\t\tnewInput[deletePos] = ''\n\n\t\t\t\t\t// Trim trailing empty strings, but keep revealed letters\n\t\t\t\t\twhile (newInput.length > 0) {\n\t\t\t\t\t\tconst lastIndex = newInput.length - 1\n\t\t\t\t\t\tif (newInput[lastIndex] === '' && !revealedLettersParam.includes(lastIndex)) {\n\t\t\t\t\t\t\tnewInput.pop()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn newInput\n\t\t\t\t}\n\n                return prevInput\n            } else {\n\t\t\t\treturn prevInput\n\t\t\t}\n        })\n    }\n\t\n\t// runs when showMessage changes (but not during showLogic - that's handled in CluePage)\n\tuseEffect(() => {\n\t\t// Only run handleHint when showMessage is true and NOT in showLogic mode\n\t\t// In showLogic mode, CluePage's effect handles calling handleHint\n\t\t// In regular hint mode, handleHint is called directly from handleShowHint\n\t\tif (showMessage && !showLogic) {\n\t\t\thandleHint(activeClueRef.current, nextHint, showMessage, checkAns, showLogic)\n\t\t}\n\t}, [showMessage, nextHint, checkAns, showLogic])\n\n\treturn {\n\t\tstats,\n\t\tsetStats,\n\t\tinput,\n\t\tsetInput,\n\t\thandleInput,\n\t\tnextHint,\n\t\tsetNextHint,\n\t\tshowMessage,\n\t\tsetShowMessage,\n\t\tcheckAns,\n\t\tsetCheckAns,\n\t\tshowLogic,\n\t\tsetShowLogic,\n\t\trevealedLetters,\n\t\tsetRevealedLetters,\n\t\tshowRevealPrompt,\n\t\tsetShowRevealPrompt,\n\t\trevealPromptIndex,\n\t\thandleRevealLetter,\n\t\thandleSquareClick\n\t}\n}\n\nexport default useManageClue","import React, { useContext, useState, useEffect, useRef, useCallback } from \"react\";\nimport { graphql } from \"gatsby\";\nimport { UserContext } from \"../../utils/UserContext\";\nimport Layout from \"../../components/layout\";\nimport Bottom from \"../../components/Bottom\";\nimport Tooltip from \"../../components/Tooltip\";\nimport HintTooltip from \"../../components/HintTooltip\";\nimport prepClue from \"../../utils/clue/usePrepClue\";\nimport manageClue from \"../../utils/clue/useManageClue\";\nimport handleHint from \"../../utils/clue/handleHint\";\nimport highlightLetters from \"../../utils/clue/highlightLetters\";\nimport changeColor from \"../../utils/clue/changeColor\";\nimport { isTodayClue } from \"../../utils/dateHelpers\";\n\n// Eye icon components using currentColor to match TopBar icons\nconst EyeOpenIcon = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"text-neutral-500 dark:text-neutral-200\"\n  >\n    <g clipPath=\"url(#clip0_eye_open)\">\n      <path\n        d=\"M0.833984 10.0002C0.833984 10.0002 4.16732 3.3335 10.0007 3.3335C15.834 3.3335 19.1673 10.0002 19.1673 10.0002C19.1673 10.0002 15.834 16.6668 10.0007 16.6668C4.16732 16.6668 0.833984 10.0002 0.833984 10.0002Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M10.0007 12.5002C11.3814 12.5002 12.5007 11.3809 12.5007 10.0002C12.5007 8.61945 11.3814 7.50016 10.0007 7.50016C8.61994 7.50016 7.50065 8.61945 7.50065 10.0002C7.50065 11.3809 8.61994 12.5002 10.0007 12.5002Z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_eye_open\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nconst HintIcon = () => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"text-neutral-500 dark:text-neutral-200\"\n  >\n    <path\n      d=\"M9 21h6M9 19h6M12 3a6 6 0 0 0-6 6c0 2.22 1.21 4.16 3 5.19V17a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-2.81c1.79-1.03 3-2.97 3-5.19a6 6 0 0 0-6-6z\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    />\n  </svg>\n);\n\nconst EyeClosedIcon = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"text-neutral-500 dark:text-neutral-200\"\n  >\n    <g clipPath=\"url(#clip0_eye_closed)\">\n      <path\n        d=\"M14.9507 14.9502C13.5261 16.036 11.7916 16.6375 10.0007 16.6668C4.16732 16.6668 0.833984 10.0002 0.833984 10.0002C1.87056 8.06841 3.30826 6.38067 5.05065 5.05016M8.25065 3.5335C8.82426 3.39923 9.41154 3.33211 10.0007 3.3335C15.834 3.3335 19.1673 10.0002 19.1673 10.0002C18.6615 10.9465 18.0582 11.8374 17.3673 12.6585M11.7673 11.7668C11.5384 12.0125 11.2624 12.2095 10.9558 12.3461C10.6491 12.4827 10.3181 12.5562 9.98239 12.5621C9.64672 12.5681 9.31329 12.5063 9.00199 12.3806C8.6907 12.2548 8.40792 12.0677 8.17052 11.8303C7.93313 11.5929 7.74598 11.3101 7.62024 10.9988C7.4945 10.6875 7.43276 10.3541 7.43868 10.0184C7.4446 9.68274 7.51807 9.3517 7.65471 9.04504C7.79135 8.73837 7.98836 8.46237 8.23398 8.2335M0.833984 0.833496L19.1673 19.1668\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_eye_closed\">\n        <rect width=\"20\" height=\"20\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nconst CluePage = ({ data }) => {\n  const dataClue = data.cluesJson;\n  const [showDifficultyTooltip, setShowDifficultyTooltip] = useState(false);\n  const [revealPopupPosition, setRevealPopupPosition] = useState(null);\n  const [hintPosition, setHintPosition] = useState(\"right\"); // \"right\" or \"below\"\n  const [activeTooltipHint, setActiveTooltipHint] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState(null);\n  const [showRevealSolutionConfirm, setShowRevealSolutionConfirm] = useState(false);\n  const [revealSolutionPopupPosition, setRevealSolutionPopupPosition] = useState(null);\n  const [solutionRevealedViaHint, setSolutionRevealedViaHint] = useState(false);\n  const [showNoMoreHintsTooltip, setShowNoMoreHintsTooltip] = useState(false);\n  const [noMoreHintsTooltipPosition, setNoMoreHintsTooltipPosition] = useState(null);\n  const revealPopupRef = useRef(null);\n  const revealSolutionPopupRef = useRef(null);\n  const activeTooltipHintRef = useRef(null);\n\n  // Add fixed-page class to prevent scrolling\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      document.body.classList.add(\"fixed-page\");\n      return () => {\n        document.body.classList.remove(\"fixed-page\");\n      };\n    }\n  }, []);\n\n  // Track when users start today's daily clue\n  useEffect(() => {\n    if (isTodayClue(dataClue) && typeof window.gtag !== \"undefined\") {\n      window.gtag(\"event\", \"started_daily_clue\", {\n        clid: dataClue.clid,\n        difficulty: dataClue.difficulty,\n        streak: streak,\n      });\n    }\n  }, [dataClue.clid, dataClue.release, dataClue.difficulty, streak]);\n\n  // Helper function for difficulty\n  const getDifficultyText = (difficulty) => {\n    switch (Number(difficulty)) {\n      case 1:\n        return \"Easy\";\n      case 2:\n        return \"Moderate\";\n      case 3:\n        return \"Difficult\";\n      case 4:\n        return \"Very Difficult\";\n      default:\n        return \"Easy\";\n    }\n  };\n  const {\n    addCompletedClue,\n    showType,\n    setShowType,\n    returnLearn,\n    setReturnLearn,\n    streak,\n    setCurrentStats,\n  } = useContext(UserContext);\n\n  // Set up activeClue\n  let { activeClue } = prepClue(dataClue);\n\n  // Keep a ref to always access the latest activeClue in callbacks\n  const activeClueRef = useRef(activeClue);\n  activeClueRef.current = activeClue;\n\n  let {\n    stats,\n    setStats,\n    input,\n    setInput,\n    handleInput,\n    nextHint,\n    setNextHint,\n    showMessage,\n    setShowMessage,\n    checkAns,\n    setCheckAns,\n    showLogic,\n    setShowLogic,\n    revealedLetters,\n    showRevealPrompt,\n    setShowRevealPrompt,\n    revealPromptIndex,\n    handleRevealLetter,\n    handleSquareClick,\n  } = manageClue(activeClue);\n\n  // Sync stats to context for TopBar display\n  useEffect(() => {\n    setCurrentStats(stats);\n    return () => setCurrentStats(null);\n  }, [stats, setCurrentStats]);\n\n  // Calculate tooltip position based on hint refs\n  const calculateTooltipPosition = useCallback((hintIndex) => {\n    const hint = activeClueRef.current.hints[hintIndex];\n    if (!hint) return null;\n\n    // Get bounding boxes of all highlighted letters\n    let minTop = Infinity;\n    let leftmost = Infinity;\n    let rightmost = -Infinity;\n\n    // Try hint.ref first (indicator word in clue)\n    if (hint.ref && hint.ref.length > 0) {\n      hint.ref.forEach((ref) => {\n        if (ref && ref.current) {\n          const rect = ref.current.getBoundingClientRect();\n          if (rect.top < minTop) minTop = rect.top;\n          if (rect.left < leftmost) leftmost = rect.left;\n          if (rect.right > rightmost) rightmost = rect.right;\n        }\n      });\n    }\n\n    // If hint.ref didn't work, try addLetters refs as fallback\n    if (minTop === Infinity && hint.addLetters && hint.addLetters.ref && hint.addLetters.ref.current) {\n      const addLettersRefs = hint.addLetters.ref.current;\n      if (Array.isArray(addLettersRefs) && addLettersRefs.length > 0) {\n        addLettersRefs.forEach((ref) => {\n          if (ref && ref.current) {\n            const rect = ref.current.getBoundingClientRect();\n            if (rect.top < minTop) minTop = rect.top;\n            if (rect.left < leftmost) leftmost = rect.left;\n            if (rect.right > rightmost) rightmost = rect.right;\n          }\n        });\n      }\n    }\n\n    // If still no position found, try the clue section as last resort\n    if (minTop === Infinity) {\n      const clueSection = document.getElementById('clueSectionRef');\n      if (clueSection) {\n        const rect = clueSection.getBoundingClientRect();\n        return { x: rect.left + rect.width / 2, y: rect.top + rect.height };\n      }\n      return null;\n    }\n\n    // Position tooltip centered above the highlighted span\n    const centerX = (leftmost + rightmost) / 2;\n    return { x: centerX, y: minTop };\n  }, []);\n\n  // Handle show hint click\n  const handleShowHint = () => {\n    // Check if this is the last hint (reveals solution)\n    const isRevealingHint = activeClue.hints[nextHint]?.reveals;\n\n    // For today's clue, don't allow revealing the solution\n    if (isRevealingHint && isTodayClue(dataClue)) {\n      return;\n    }\n\n    if (isRevealingHint) {\n      // Show confirmation popup instead of revealing immediately\n      const hintButton = document.querySelector(\".hint-button\");\n      if (hintButton) {\n        const rect = hintButton.getBoundingClientRect();\n        setRevealSolutionPopupPosition({\n          top: rect.top,\n          left: rect.left + rect.width / 2,\n        });\n      }\n      setShowRevealSolutionConfirm(true);\n      return;\n    }\n\n    // Gray out the previous hint if one is active\n    const prevHintIndex = activeTooltipHintRef.current;\n    if (prevHintIndex !== null && prevHintIndex > 0) {\n      const prevHint = activeClue.hints[prevHintIndex];\n      if (prevHint && prevHint.ref) {\n        highlightLetters(prevHint.ref, false, true);\n        if (prevHint.addLetters && prevHint.addLetters.ref && prevHint.addLetters.ref.current) {\n          changeColor(prevHint.addLetters.ref.current, false, true);\n        }\n      }\n    }\n\n    // Store current hint index and refs before state updates\n    const currentHintIndex = nextHint;\n    const currentHint = activeClue.hints[currentHintIndex];\n\n    setStats((prevStats) => ({ ...prevStats, hints: prevStats.hints + 1 }));\n    setCheckAns(false);\n    setNextHint(currentHintIndex + 1);\n\n    // Calculate position and show tooltip\n    const position = calculateTooltipPosition(currentHintIndex);\n    setTooltipPosition(position);\n    setActiveTooltipHint(currentHintIndex);\n    activeTooltipHintRef.current = currentHintIndex;\n\n    // Run the hint animation after state updates are processed\n    // Use the captured hint to ensure we have the correct refs\n    setTimeout(() => {\n      if (currentHintIndex === 0 && currentHint.ref) {\n        // Definition hint - underline directly using inline styles\n        currentHint.ref.forEach((ref) => {\n          if (ref && ref.current) {\n            ref.current.style.textDecoration = \"underline\";\n          }\n        });\n      }\n      handleHint(activeClue, currentHintIndex, true, false, showLogic);\n    }, 0);\n  };\n\n  // Handle reveal solution confirmation\n  const handleRevealSolution = () => {\n    setShowRevealSolutionConfirm(false);\n    setRevealSolutionPopupPosition(null);\n\n    // Store current hint index before state updates\n    const currentHintIndex = nextHint;\n\n    // Mark as revealed via hint (so Message hides the text, tooltip shows it)\n    setSolutionRevealedViaHint(true);\n\n    // Increment hints count\n    setStats((prevStats) => ({ ...prevStats, hints: prevStats.hints + 1 }));\n    setCheckAns(false);\n\n    // Calculate position and show tooltip with final hint\n    const position = calculateTooltipPosition(currentHintIndex);\n    setTooltipPosition(position);\n    setActiveTooltipHint(currentHintIndex);\n    activeTooltipHintRef.current = currentHintIndex;\n\n    // Clear input and show message (for buttons)\n    setInput([]);\n    setShowMessage(true);\n\n    // Run the hint animation\n    setTimeout(() => {\n      handleHint(activeClue, currentHintIndex, true, false, showLogic);\n    }, 0);\n  };\n\n  // Dismiss tooltip and gray out the hint\n  const dismissTooltip = useCallback(() => {\n    const hintIndex = activeTooltipHintRef.current;\n    if (hintIndex !== null && !showLogic) {\n      const hint = activeClueRef.current.hints[hintIndex];\n      // Only gray out non-definition hints (definition is underlined, not highlighted)\n      if (hint && hint.ref && hintIndex > 0) {\n        // Gray out the highlight background\n        highlightLetters(hint.ref, false, true);\n        // Gray out text color for addLetters\n        if (hint.addLetters && hint.addLetters.ref && hint.addLetters.ref.current) {\n          changeColor(hint.addLetters.ref.current, false, true);\n        }\n      }\n    }\n    activeTooltipHintRef.current = null;\n    setActiveTooltipHint(null);\n    setTooltipPosition(null);\n  }, [showLogic]);\n\n  // Click outside to dismiss tooltip (only in regular hint mode, not showLogic)\n  useEffect(() => {\n    // In showLogic mode, don't set up click-outside-to-dismiss\n    // User advances with Next button instead\n    if (activeTooltipHint === null || showLogic) return;\n\n    const handleClickOutside = () => {\n      dismissTooltip();\n    };\n\n    // Use a slight delay to avoid immediate dismissal\n    const timeoutId = setTimeout(() => {\n      document.addEventListener(\"click\", handleClickOutside);\n    }, 100);\n\n    return () => {\n      clearTimeout(timeoutId);\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, [activeTooltipHint, dismissTooltip, showLogic]);\n\n  // Show tooltip during \"Show logic\" mode\n  useEffect(() => {\n    if (showLogic && showMessage && !checkAns) {\n      const clue = activeClueRef.current;\n      const currentHint = clue.hints[nextHint];\n      if (!currentHint) return;\n\n      // Two-step hint categories - these share source letters with their first step\n      const twoStepCategories = ['ag-2', 'hw-2', 'hp-2', 'in-2', 'lb-2', 'sy-2'];\n      const isTwoStepSecond = twoStepCategories.includes(currentHint.category);\n\n      // Gray out previous hint when stepping forward (but not for two-step hints)\n      if (nextHint > 1 && !isTwoStepSecond) {\n        const prevHint = clue.hints[nextHint - 1];\n        if (prevHint && prevHint.ref && prevHint.ref.length > 0) {\n          highlightLetters(prevHint.ref, false, true);\n        }\n      }\n\n      // Reset previous hint's addLetters to primary color\n      if (nextHint > 0) {\n        const prevHint = clue.hints[nextHint - 1];\n        if (prevHint && prevHint.addLetters && prevHint.addLetters.ref && prevHint.addLetters.ref.current) {\n          changeColor(prevHint.addLetters.ref.current, false, true);\n        }\n      }\n\n      // For definition hint (index 0), underline directly\n      // Using inline styles to prevent React from overwriting on re-render\n      if (nextHint === 0 && currentHint.ref && currentHint.ref.length > 0) {\n        currentHint.ref.forEach((ref) => {\n          if (ref && ref.current) {\n            ref.current.style.textDecoration = \"underline\";\n          }\n        });\n      }\n\n      // For indicator hints (nextHint > 0), apply highlighting\n      if (nextHint > 0 && currentHint.ref && currentHint.ref.length > 0) {\n        highlightLetters(currentHint.ref);\n      }\n\n      // Calculate position and show tooltip\n      const position = calculateTooltipPosition(nextHint);\n      setTooltipPosition(position);\n      setActiveTooltipHint(nextHint);\n      activeTooltipHintRef.current = nextHint;\n\n      // Run hint animation for additional effects (color changes, letter movements)\n      setTimeout(() => {\n        handleHint(activeClueRef.current, nextHint, true, false, showLogic);\n      }, 0);\n    }\n  }, [showLogic, showMessage, nextHint, checkAns, calculateTooltipPosition]);\n\n  // Map first-step hint categories to their second-step counterparts\n  const twoStepHintMap = {\n    'anagram': 'ag-2',\n    'hidden word': 'hw-2',\n    'homophone': 'hp-2',\n    'letter bank': 'lb-2',\n    'synonym': 'sy-2',\n  };\n\n  // Handle clicking on highlighted clue text to re-show hint tooltip\n  const handleClueLetterClick = useCallback((index) => {\n    const clue = activeClueRef.current;\n    // Check if this letter is part of any revealed hint (hints 0 through nextHint-1)\n    for (let hintIndex = 0; hintIndex < nextHint; hintIndex++) {\n      const hint = clue.hints[hintIndex];\n      if (hint && hint.ref) {\n        const isPartOfHint = hint.ref.some((ref) => {\n          // Check if this ref corresponds to the clicked letter index\n          return ref && ref.current === clue.clue.ref.current[index]?.current;\n        });\n\n        if (isPartOfHint) {\n          let targetHintIndex = hintIndex;\n\n          // Check if this is a first-step hint with a revealed second-step\n          const secondStepCategory = twoStepHintMap[hint.category];\n          if (secondStepCategory) {\n            const nextHintObj = clue.hints[hintIndex + 1];\n            // If the next hint is the corresponding second-step and has been revealed\n            if (nextHintObj?.category === secondStepCategory && hintIndex + 1 < nextHint) {\n              targetHintIndex = hintIndex + 1;\n            }\n          }\n\n          const position = calculateTooltipPosition(targetHintIndex);\n          setTooltipPosition(position);\n          setActiveTooltipHint(targetHintIndex);\n          activeTooltipHintRef.current = targetHintIndex;\n          return;\n        }\n      }\n    }\n  }, [nextHint, calculateTooltipPosition]);\n\n  // Determine if hint button should be shown\n  // Hide when showing completion message (answer checked or solution revealed)\n  const showHintButton = !showMessage;\n\n  // Check if this is today's clue and if hints are exhausted (next hint would reveal solution)\n  const isTodaysClue = isTodayClue(dataClue);\n  const isRevealingHint = activeClue.hints[nextHint]?.reveals;\n  const hintsExhaustedForToday = isTodaysClue && isRevealingHint;\n\n  // Calculate hint button position based on available space\n  useEffect(() => {\n    const calculateHintPosition = () => {\n      const solSection = document.getElementById(\"solSectionRef\");\n      if (solSection) {\n        const rect = solSection.getBoundingClientRect();\n        const rightSpace = window.innerWidth - rect.right;\n        // Need at least 60px for the button (40px button + 20px margin)\n        setHintPosition(rightSpace >= 60 ? \"right\" : \"below\");\n      }\n    };\n\n    calculateHintPosition();\n    window.addEventListener(\"resize\", calculateHintPosition);\n    return () => window.removeEventListener(\"resize\", calculateHintPosition);\n  }, []);\n\n  // Calculate popup position when reveal prompt is shown\n  useEffect(() => {\n    if (showRevealPrompt && revealPromptIndex !== null) {\n      const element = document.getElementById(`i${revealPromptIndex}`);\n      if (element) {\n        const rect = element.getBoundingClientRect();\n        setRevealPopupPosition({\n          top: rect.top,\n          left: rect.left + rect.width / 2,\n        });\n      }\n    } else {\n      setRevealPopupPosition(null);\n    }\n  }, [showRevealPrompt, revealPromptIndex]);\n\n  // Close reveal popup when clicking outside\n  useEffect(() => {\n    if (!showRevealPrompt) return;\n\n    const handleClickOutside = (e) => {\n      if (\n        revealPopupRef.current &&\n        !revealPopupRef.current.contains(e.target)\n      ) {\n        setShowRevealPrompt(false);\n      }\n    };\n\n    document.addEventListener(\"click\", handleClickOutside, true);\n    return () =>\n      document.removeEventListener(\"click\", handleClickOutside, true);\n  }, [showRevealPrompt, setShowRevealPrompt]);\n\n  // Close reveal solution popup when clicking outside\n  useEffect(() => {\n    if (!showRevealSolutionConfirm) return;\n\n    const handleClickOutside = (e) => {\n      if (\n        revealSolutionPopupRef.current &&\n        !revealSolutionPopupRef.current.contains(e.target)\n      ) {\n        setShowRevealSolutionConfirm(false);\n        setRevealSolutionPopupPosition(null);\n      }\n    };\n\n    document.addEventListener(\"click\", handleClickOutside, true);\n    return () =>\n      document.removeEventListener(\"click\", handleClickOutside, true);\n  }, [showRevealSolutionConfirm]);\n\n  // Close no more hints tooltip when clicking outside\n  useEffect(() => {\n    if (!showNoMoreHintsTooltip) return;\n\n    const handleClickOutside = () => {\n      setShowNoMoreHintsTooltip(false);\n      setNoMoreHintsTooltipPosition(null);\n    };\n\n    // Use a slight delay to avoid immediate dismissal from the same click\n    const timeoutId = setTimeout(() => {\n      document.addEventListener(\"click\", handleClickOutside);\n    }, 100);\n\n    return () => {\n      clearTimeout(timeoutId);\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, [showNoMoreHintsTooltip]);\n\n  // type HTML\n  const pillList = activeClue.type.map((t, index) => (\n    <li\n      key={`type_${index}`}\n      className=\"type-pill tooltip-parent border border-neutral-400 dark:!border-neutral-500 dark:!text-white\"\n      aria-describedby=\"tooltip-id\"\n    >\n      {t}\n      <Tooltip text={t} />\n    </li>\n  ));\n\n  const typeInsert = showType ? (\n    <>\n      <li className=\"eyecon\">\n        <button aria-label=\"Hide type\" onClick={() => setShowType(false)}>\n          <EyeClosedIcon />\n        </button>\n      </li>\n      {pillList}\n    </>\n  ) : (\n    <>\n      <li className=\"eyecon\">\n        <button onClick={() => setShowType(true)} aria-label=\"Show type\">\n          <EyeOpenIcon />\n        </button>\n      </li>\n      <li className=\"type-text\">\n        <button onClick={() => setShowType(true)} aria-label=\"Expand type\">\n          See type\n        </button>\n      </li>\n    </>\n  );\n\n  // Check if a letter at given index is part of any revealed hint\n  const isLetterInRevealedHint = (index) => {\n    for (let hintIndex = 0; hintIndex < nextHint; hintIndex++) {\n      const hint = activeClue.hints[hintIndex];\n      if (hint && hint.ref) {\n        const isInHint = hint.ref.some(\n          (ref) => ref && ref.current === activeClue.clue.ref.current[index]?.current\n        );\n        if (isInHint) return true;\n      }\n    }\n    return false;\n  };\n\n  // clue HTML\n  const clueInsert = activeClue.clue.arr.map((letter, index) => {\n    const inRevealedHint = isLetterInRevealedHint(index);\n    return (\n      <span\n        key={`cluearr_${index}`}\n        ref={activeClue.clue.ref.current[index]}\n        className={`letter${inRevealedHint ? \" hint-clickable\" : \"\"}`}\n        onClick={\n          inRevealedHint\n            ? (e) => {\n                e.stopPropagation();\n                handleClueLetterClick(index);\n              }\n            : undefined\n        }\n        style={inRevealedHint ? { cursor: \"pointer\" } : undefined}\n      >\n        {letter}\n      </span>\n    );\n  });\n\n  // addLetters HTML\n  let addInsert = [];\n  activeClue.hints.forEach((hint, parentIndex) => {\n    if (\n      hint.type === \"indicator\" &&\n      !!hint.addLetters &&\n      !!hint.addLetters.value\n    ) {\n      const lettersInsert = hint.addLetters.value.map((letter, childIndex) => (\n        <span\n          key={`${parentIndex}_${childIndex}`}\n          ref={activeClue.addLetters.ref.current[parentIndex][childIndex]}\n          className=\"letter\"\n        >\n          {letter}\n        </span>\n      ));\n\n      const brCats = [\n        \"container\",\n        \"reversal\",\n        \"ag-2\",\n        \"lb-2\",\n        \"hw-2\",\n        \"spoonerism\",\n      ];\n      const addBr = brCats.includes(hint.category);\n      const br = (\n        <span key={`br_${parentIndex}`} style={{ flexBasis: \"100%\" }}></span>\n      );\n\n      const addSpoon = hint.category === \"spoonerism\";\n      const spoon = (\n        <>\n          <svg\n            key={`svg_${parentIndex}`}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 512 512\"\n            width=\"20px\"\n            height=\"20px\"\n            ref={activeClue.spoon}\n          >\n            <path d=\"M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z\" />\n          </svg>\n          <span style={{ flexBasis: \"100%\" }}></span>\n        </>\n      );\n\n      addBr && addInsert.push(br);\n      addSpoon && addInsert.push(spoon);\n      addInsert.push(\n        <span\n          key={`${parentIndex}_word`}\n          ref={hint.addLetters.wordRef}\n          className=\"word\"\n        >\n          {lettersInsert}&nbsp;\n        </span>,\n      );\n    }\n  });\n\n  // Find the first empty, non-revealed position for the cursor\n  const getCursorPosition = () => {\n    for (let i = 0; i < activeClue.solution.arr.length; i++) {\n      if ((!input[i] || input[i] === \"\") && !revealedLetters.includes(i)) {\n        return i;\n      }\n    }\n    return activeClue.solution.arr.length;\n  };\n  const cursorPosition = showMessage ? -1 : getCursorPosition();\n\n  // solution HTML\n  const solInsert = activeClue.solution.arr.map((letter, index) => {\n    const isActive = index === cursorPosition;\n    const isRevealed = revealedLetters.includes(index);\n    const isEmpty = !input[index] || input[index] === \"\";\n    const wouldBeLastLetter =\n      revealedLetters.length >= activeClue.solution.arr.length - 1;\n    const canReveal =\n      isEmpty && !isRevealed && !showMessage && !wouldBeLastLetter;\n\n    let cursor = \"default\";\n\n    if (canReveal) {\n      cursor = \"pointer\";\n    }\n\n    const squareStyle = {\n      borderWidth: \"0.75px\",\n      cursor,\n      pointerEvents: canReveal ? \"auto\" : \"none\",\n      ...(isActive && { backgroundColor: \"var(--lc-active-bg)\" }),\n    };\n\n    return (\n      <span\n        key={`solarr_${index}`}\n        id={`i${index}`}\n        className=\"letter border-neutral-900 dark:!border-white\"\n        style={squareStyle}\n        onClick={() => handleSquareClick(index)}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            handleSquareClick(index);\n          }\n        }}\n        role={canReveal ? \"button\" : \"presentation\"}\n        tabIndex={canReveal ? 0 : -1}\n        aria-label={canReveal ? `Reveal letter ${index + 1}` : undefined}\n        data-testid={`solution-square-${index}`}\n        data-revealed={isRevealed ? \"true\" : \"false\"}\n      >\n        <span\n          id={`sl${index}`}\n          ref={activeClue.solution.ref.current[index]}\n          className=\"solLetter\"\n        >\n          {letter}\n        </span>\n        <span\n          className=\"typeLetter\"\n          style={isRevealed ? { color: \"var(--lc-highlight-text)\" } : {}}\n        >\n          {input[index]}\n        </span>\n      </span>\n    );\n  });\n\n  // solution length\n  const solLength = (\n    <span\n      id=\"solLengthRef\"\n      ref={activeClue.solution.length.ref}\n      className=\"solution-letters\"\n      data-testid=\"solution-length\"\n    >\n      &nbsp;{activeClue.solution.length.value}\n    </span>\n  );\n\n  // source HTML\n  const sourceInsert = activeClue.source.href ? (\n    <a target=\"_blank\" rel=\"noreferrer\" href={activeClue.source.href}>\n      {activeClue.source.value}\n    </a>\n  ) : (\n    <span>{activeClue.source.value}</span>\n  );\n\n  return (\n    <Layout>\n      <div className=\"clue-page\">\n        <div\n          id=\"clue-container\"\n          className=\"clue lc-container\"\n          data-testid=\"clue-container\"\n        >\n          <ul className=\"type\">{typeInsert}</ul>\n          <div\n            id=\"clueSectionRef\"\n            ref={activeClue.clue.sectionRef}\n            className=\"clue\"\n            data-testid=\"clue-text\"\n          >\n            <div>\n              {clueInsert} {solLength}\n            </div>\n          </div>\n          <div className=\"addLetters\">{addInsert}</div>\n          <div className=\"sol-section\">\n            <div className=\"solution-wrapper\">\n              <div\n                id=\"solSectionRef\"\n                ref={activeClue.solution.sectionRef}\n                className=\"solution\"\n              >\n                {solInsert}\n              </div>\n              {showHintButton && (\n                <button\n                  className={`hint-button hint-${hintPosition}${hintsExhaustedForToday ? ' hint-disabled' : ''}`}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    if (hintsExhaustedForToday) {\n                      const hintButton = e.currentTarget;\n                      const rect = hintButton.getBoundingClientRect();\n                      setNoMoreHintsTooltipPosition({\n                        top: rect.top,\n                        left: rect.left + rect.width / 2,\n                      });\n                      setShowNoMoreHintsTooltip(true);\n                    } else {\n                      handleShowHint();\n                    }\n                  }}\n                  onMouseEnter={() => {\n                    if (hintsExhaustedForToday) {\n                      const hintButton = document.querySelector(\".hint-button\");\n                      if (hintButton) {\n                        const rect = hintButton.getBoundingClientRect();\n                        setNoMoreHintsTooltipPosition({\n                          top: rect.top,\n                          left: rect.left + rect.width / 2,\n                        });\n                      }\n                      setShowNoMoreHintsTooltip(true);\n                    }\n                  }}\n                  onMouseLeave={() => {\n                    if (hintsExhaustedForToday) {\n                      setShowNoMoreHintsTooltip(false);\n                      setNoMoreHintsTooltipPosition(null);\n                    }\n                  }}\n                  aria-label={hintsExhaustedForToday ? \"No more hints available\" : \"Show hint\"}\n                >\n                  <HintIcon />\n                </button>\n              )}\n            </div>\n            <div id=\"sourceRef\" ref={activeClue.source.ref} className=\"source\">\n              by {sourceInsert}\n            </div>\n          </div>\n          <div className=\"clue-difficulty\">\n            <button\n              className=\"difficulty-button\"\n              aria-label={`Difficulty: ${getDifficultyText(\n                dataClue.difficulty,\n              )}`}\n              onMouseEnter={() => setShowDifficultyTooltip(true)}\n              onMouseLeave={() => setShowDifficultyTooltip(false)}\n              onClick={() => setShowDifficultyTooltip(!showDifficultyTooltip)}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" || e.key === \" \") {\n                  e.preventDefault();\n                  setShowDifficultyTooltip(!showDifficultyTooltip);\n                }\n              }}\n            >\n              <div\n                className={`difficulty-grid difficulty-${dataClue.difficulty}`}\n                aria-hidden=\"true\"\n              >\n                {[0, 1, 2, 3].map((i) => (\n                  <div\n                    key={i}\n                    className={`difficulty-square ${i < dataClue.difficulty ? \"filled\" : \"\"}`}\n                  />\n                ))}\n              </div>\n            </button>\n            {showDifficultyTooltip && (\n              <div className=\"difficulty-tooltip\">\n                {getDifficultyText(dataClue.difficulty)}\n              </div>\n            )}\n          </div>\n        </div>\n        <Bottom\n          showMessage={showMessage}\n          setShowMessage={setShowMessage}\n          nextHint={nextHint}\n          setNextHint={setNextHint}\n          activeClue={activeClue}\n          addCompletedClue={addCompletedClue}\n          input={input}\n          setInput={setInput}\n          handleInput={handleInput}\n          checkAns={checkAns}\n          setCheckAns={setCheckAns}\n          stats={stats}\n          setStats={setStats}\n          returnLearn={returnLearn}\n          setReturnLearn={setReturnLearn}\n          showLogic={showLogic}\n          setShowLogic={setShowLogic}\n          revealedLetters={revealedLetters}\n          solutionRevealedViaHint={solutionRevealedViaHint}\n        />\n      </div>\n\n      {showRevealPrompt &&\n        revealPromptIndex !== null &&\n        revealPopupPosition && (\n          <div\n            ref={revealPopupRef}\n            className=\"reveal-popup\"\n            style={{\n              position: \"fixed\",\n              top: revealPopupPosition.top - 10,\n              left: revealPopupPosition.left,\n              transform: \"translate(-50%, -100%)\",\n              zIndex: 100,\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              padding: \"0.75rem 1rem 0.5rem\",\n            }}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"reveal-letter-title\"\n          >\n            <p\n              id=\"reveal-letter-title\"\n              style={{ margin: \"0 0 0.5rem 0\", fontSize: \"0.8rem\" }}\n            >\n              Reveal letter?\n            </p>\n            <button\n              className=\"bg-purple-200 dark:!bg-[#4A3F6B] dark:!text-white\"\n              style={{\n                padding: \"0.35rem 0.75rem\",\n                borderRadius: \"50px\",\n                border: \"none\",\n                cursor: \"pointer\",\n                fontSize: \"0.8rem\",\n              }}\n              onClick={() => handleRevealLetter(revealPromptIndex)}\n              data-testid=\"modal-reveal-confirm\"\n            >\n              Reveal\n            </button>\n            <div className=\"popup-arrow\" />\n          </div>\n        )}\n\n      {showRevealSolutionConfirm && revealSolutionPopupPosition && (\n        <div\n          ref={revealSolutionPopupRef}\n          className=\"reveal-popup\"\n          style={{\n            position: \"fixed\",\n            top: revealSolutionPopupPosition.top - 10,\n            left: revealSolutionPopupPosition.left,\n            transform: \"translate(-50%, -100%)\",\n            zIndex: 100,\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            padding: \"0.75rem 1rem 0.5rem\",\n          }}\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"reveal-solution-title\"\n        >\n          <p\n            id=\"reveal-solution-title\"\n            style={{ margin: \"0 0 0.5rem 0\", fontSize: \"0.8rem\" }}\n          >\n            Reveal solution?\n          </p>\n          <button\n            className=\"bg-purple-200 dark:!bg-[#4A3F6B] dark:!text-white\"\n            style={{\n              padding: \"0.35rem 0.75rem\",\n              borderRadius: \"50px\",\n              border: \"none\",\n              cursor: \"pointer\",\n              fontSize: \"0.8rem\",\n            }}\n            onClick={handleRevealSolution}\n            data-testid=\"modal-reveal-solution-confirm\"\n          >\n            Reveal\n          </button>\n          <div className=\"popup-arrow\" />\n        </div>\n      )}\n\n      {showNoMoreHintsTooltip && noMoreHintsTooltipPosition && (\n        <div\n          className=\"hint-tooltip no-more-hints-tooltip\"\n          style={{\n            position: \"fixed\",\n            top: noMoreHintsTooltipPosition.top - 12,\n            left: noMoreHintsTooltipPosition.left,\n            transform: \"translate(-50%, -100%)\",\n            zIndex: 100,\n          }}\n        >\n          <div className=\"hint-tooltip-content\">\n            <div className=\"hint-tooltip-message\">No more hints available</div>\n          </div>\n          <div className=\"hint-tooltip-arrow\" />\n        </div>\n      )}\n\n      {activeTooltipHint !== null && tooltipPosition && (\n        <HintTooltip\n          hint={activeClue.hints[activeTooltipHint]}\n          position={tooltipPosition}\n          onDismiss={dismissTooltip}\n        />\n      )}\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query ($id: String) {\n    cluesJson(id: { eq: $id }) {\n      id\n      clid\n      clue {\n        value\n      }\n      release\n      difficulty\n      dow\n      type\n      definition\n      hints {\n        category\n        value\n        explainer\n        end {\n          value\n        }\n      }\n      solution {\n        value\n      }\n      source {\n        value\n      }\n    }\n  }\n`;\n\nexport default CluePage;\n\nexport const Head = ({ data }) => {\n  const clue = data.cluesJson;\n  const clueDate = new Date(clue.release).toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n\n  return (\n    <>\n      <title>{`Cryptic Clue #${clue.clid} - ${clueDate} | Learn Cryptic`}</title>\n      <meta\n        name=\"description\"\n        content={`Solve today's cryptic crossword clue: \"${clue.clue.value}\". Interactive hints and explanations to help you learn cryptic crossword techniques.`}\n      />\n      <link\n        rel=\"canonical\"\n        href={`https://learncryptic.com/clues/${clue.clid}`}\n      />\n      <script type=\"application/ld+json\">\n        {JSON.stringify({\n          \"@context\": \"https://schema.org\",\n          \"@type\": \"Question\",\n          name: `Cryptic Clue #${clue.clid}`,\n          text: clue.clue.value,\n          datePublished: clue.release,\n          author: {\n            \"@type\": \"Organization\",\n            name: \"Learn Cryptic\",\n          },\n          acceptedAnswer: {\n            \"@type\": \"Answer\",\n            text: clue.solution.value,\n          },\n          difficulty: clue.difficulty,\n          about: {\n            \"@type\": \"Thing\",\n            name: \"Cryptic Crossword\",\n            description:\n              \"A type of crossword puzzle where each clue is a word puzzle in itself\",\n          },\n        })}\n      </script>\n    </>\n  );\n};\n"],"names":["InfoIcon","React","width","height","viewBox","fill","xmlns","className","cx","cy","r","stroke","strokeWidth","d","BarGraphIcon","x","y","rx","ListIcon","Modal","_ref","open","onClose","children","useEffect","preventDefault","e","document","addEventListener","passive","removeEventListener","onClick","stopPropagation","_useContext","useContext","UserContext","setReturnLearn","_useContext$completed","completedClues","_useContext$streak","streak","_useContext$longestSt","longestStreak","darkMode","setDarkMode","currentStats","_useState2","_slicedToArray","useState","helpOpen","setHelpOpen","_useState4","statsOpen","setStatsOpen","_useState6","showCurrentStatsTooltip","setShowCurrentStatsTooltip","totalSolved","length","avgGuesses","reduce","sum","c","guesses","toFixed","avgHints","hints","Link","to","onMouseEnter","onMouseLeave","role","tabIndex","onKeyDown","key","src","logo","alt","id","type","name","checked","onChange","concat","href","pathname","useLocation","window","scrollTo","documentElement","scrollTop","body","ScrollToTop","TopBar","btnInfo","_btnInfo$path","path","style","_btnInfo$img","img","_btnInfo$disabled","disabled","darkModeClasses","getDarkModeClasses","toLowerCase","undefined","btnArr","isSolution","_ref$stack","stack","buttons","map","index","Button","handleInput","onEnter","canCheckAnswer","handleKeyDown","test","toUpperCase","particles","setParticles","origin","setOrigin","solBox","getElementById","rect","getBoundingClientRect","centerX","left","innerWidth","centerY","top","innerHeight","viewportWidth","velocityScale","newParticles","Array","from","_","i","angleRad","Math","random","PI","velocity","endX","cos","verticalScale","burstY","sin","gravity","delay","duration","size","color","rotation","timeout","setTimeout","clearTimeout","particle","animationDelay","animationDuration","hint","aAn","category","slice","includes","value","end","messageButton","activeClue","nextHint","input","checkAns","isCorrectAns","returnLearn","showLogic","solutionRevealedViaHint","setShowLogic","stats","msgContainer","useRef","message","join","display","gap","justifyContent","marginTop","backgroundColor","padding","lineHeight","borderRadius","fontSize","solution","arr","getMessage","explainer","isTodayClue","date1","Date","release","date2","d1","getFullYear","getMonth","getDate","d2","getTime","checkIsTodayClue","endClueShowLogic","shareScore","endClueHint","endClueGuess","reveals","nextLogic","messageStyle","hideMessageForTooltip","ref","Celebration","ButtonContainer","t","Symbol","n","iterator","o","toStringTag","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","G","v","a","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","setNextHint","setInput","setShowMessage","setStats","addCompletedClue","setCheckAns","_callee","date","dateFormatted","perfectEmojis","emoji","scoreText","_t","_t2","_context","Intl","DateTimeFormat","month","day","year","format","floor","clid","trim","navigator","userAgent","share","title","text","console","log","error","alert","clipboard","writeText","arguments","apply","_next","_throw","showHint","prevStats","_objectSpread","revealSolution","checkAnswer","_activeClue$source","_activeClue$source$re","source","current","classList","add","continue","how","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","allPositionsFilled","every","showMessage","revealedLetters","_prepBottom","prepBottom","showCompletionMessage","Message","Keyboard","matchType","useStaticQuery","allTypeJson","nodes","find","description","example","position","tooltipRef","onDismiss","arrowRef","idealLeft","adjustedLeft","right","shift","arrowOffset","clampedOffset","max","min","transform","zIndex","letters","isArray","targetLettersStart","strSlice","freshValue","clue","replace","freshValueIndex","indexOf","targetLettersStartArr","val","clueLetters","forEach","push","_toConsumableArray","h","addLetters","charArr","specialChar","split","filter","char","textContent","positionLetters","anchor","fix","moving","anchorUsed","currentDestLetter","destLetter","removeAnchor","round","Number","endPt","prevHint","solIndex","removeSpecial","prevHints","skipCats","rightValue","possibleSplits","anchorSplit","hIndex","foundSplit","joinIndex","indicatorMatch","logSplits","doubleHints","splice","anchorOther","hend","_hint$fix$anchorOther","thisMatch","_hint$fix$anchorOther2","movingLStart","movingLLength","movingRStart","movingRLength","movingSplit","movingOther","some","flat","reverse","wordWidth","total","ltr","word","dataClue","structuredClone","getSolutionLetters","creator","creators","nom","link","flatMap","obj","unshift","definition","createRef","sectionRef","spoon","getTargetLetters","requestAnimationFrame","fixList","fixLetters","definitionLettersRef","textDecoration","indicatedLettersRef","recheck","getCSSVariable","variable","getComputedStyle","getPropertyValue","getBackgroundColor","toChange","getColor","opacity","movingLettersRef","destLettersRef","timing","destIndex","findIndex","textTransform","transition","underlineLetters","highlightLetters","changeColor","moveLetters","delIndex","oddOnly","evenOnly","firstLetters","wrd","pop","startLetter","usedAnchor","_activeClue$solution$","_activeClue$solution$2","err","activeClueRef","_useState8","_useState0","_useState10","_useState12","setRevealedLetters","_useState14","showRevealPrompt","setShowRevealPrompt","_useState16","revealPromptIndex","setRevealPromptIndex","handleHint","press","revealedLettersParam","prevInput","insertPos","newInput","deletePos","lastIndex","handleRevealLetter","newRevealedLetters","sort","b","currentPos","prev","handleSquareClick","EyeOpenIcon","clipPath","HintIcon","EyeClosedIcon","_activeClue$hints$nex2","data","cluesJson","showDifficultyTooltip","setShowDifficultyTooltip","revealPopupPosition","setRevealPopupPosition","hintPosition","setHintPosition","activeTooltipHint","setActiveTooltipHint","tooltipPosition","setTooltipPosition","showRevealSolutionConfirm","setShowRevealSolutionConfirm","revealSolutionPopupPosition","setRevealSolutionPopupPosition","setSolutionRevealedViaHint","showNoMoreHintsTooltip","setShowNoMoreHintsTooltip","_useState18","noMoreHintsTooltipPosition","setNoMoreHintsTooltipPosition","revealPopupRef","revealSolutionPopupRef","activeTooltipHintRef","remove","gtag","difficulty","getDifficultyText","showType","setShowType","setCurrentStats","prepClue","_manageClue","manageClue","calculateTooltipPosition","useCallback","hintIndex","minTop","Infinity","leftmost","rightmost","addLettersRefs","clueSection","dismissTooltip","handleClickOutside","timeoutId","currentHint","isTwoStepSecond","twoStepHintMap","handleClueLetterClick","_clue$clue$ref$curren","targetHintIndex","secondStepCategory","nextHintObj","showHintButton","isTodaysClue","isRevealingHint","hintsExhaustedForToday","calculateHintPosition","solSection","rightSpace","element","contains","target","pillList","Tooltip","typeInsert","clueInsert","letter","inRevealedHint","_activeClue$clue$ref$","isLetterInRevealedHint","cursor","addInsert","parentIndex","lettersInsert","childIndex","addBr","br","flexBasis","addSpoon","wordRef","cursorPosition","getCursorPosition","solInsert","isActive","isRevealed","isEmpty","wouldBeLastLetter","canReveal","squareStyle","borderWidth","pointerEvents","solLength","sourceInsert","rel","Layout","currentTarget","_activeClue$hints$nex","hintButton","querySelector","prevHintIndex","currentHintIndex","handleShowHint","Bottom","flexDirection","alignItems","margin","border","HintTooltip","Head","_ref2","clueDate","toLocaleDateString","content","JSON","stringify","datePublished","author","acceptedAnswer","about"],"sourceRoot":""}